@model GerenciadorWeb.Models.FuncionarioViewModel
@{
    ViewBag.Title = "Cadastro";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using (Html.BeginForm("Salvar", "Funcionario"))
{
    <div class="container-fluid col-md-12">
        <div class="panel">
            <div class="panel-heading">
                <h2>Cadastro Novo Usuário <small> Gerenciamento</small></h2><hr>
            </div>
            <div class="panel-body col-md-offset-3">

                @Html.HiddenFor(model => model.ID)
                <div class="row form-group">
                    <div class="col-md-2 text-right"><label for="CPF">Funcionário:</label></div>
                    <div class="col-md-9">@Html.TextBoxFor(model => model.Descricao, htmlAttributes: new { @class = "form-control" })</div>
                </div>
                <div class="row form-group">
                    <div class="col-md-2 text-right"><label for="CPF">CPF:</label></div>
                    <div class="col-md-9">@Html.TextBoxFor(model => model.CPF, htmlAttributes: new { @class = "form-control disabled", @readonly = "readonly" })</div>
                </div>
                <div class="row form-group">
                    <div class="col-md-2 text-right"><label for="Matricula">Matrícula:</label></div>
                    <div class="col-md-9">@Html.TextBoxFor(model => model.Matricula, htmlAttributes: new { @class = "form-control disabled", @readonly = "readonly" })</div>
                </div>
                <div class="row form-group">
                    <div class="col-md-2 text-right"><label for="NomeFuncionario">Nome:</label></div>
                    <div class="col-md-9">@Html.TextBoxFor(model => model.NomeFuncionario, htmlAttributes: new { @class = "form-control disabled", @readonly = "readonly" })</div>
                </div>
                <div class="row form-group">
                    <div class="col-md-2 text-right"><label for="NomeUsuario">Usuário:</label></div>
                    <div class="col-md-9">@Html.TextBoxFor(model => model.NomeUsuario, htmlAttributes: new { @class = "form-control" })</div>
                </div>

            </div>
        </div>   
            <div class="row painel_botoes">
                <input type="submit" name="Salvar" value="Salvar" class="btn btn-primary" data-form-action="@Url.Action("Salvar")" />
                <input type="submit" name="Salvar" value="Voltar" class="btn btn-default" data-form-action="@Url.Action("Index")" />
            </div>
             
    </div>
    <script>
        $(function () {
            $("#Descricao").autocomplete({
                source: function( request, response ) {
                    $.ajax({
                        cache: false,
                        type: "GET",
                        url: '@Url.Action("AutoComplete")',
                        dataType: "json",
                        data: {
                            term: request.term
                        },
                        success: function( data ) {
                            response($.map(data, function (item) {
                                return {
                                    label: item.Descricao,
                                    value: item.Descricao,
                                    cpf: item.CPF,
                                    nome: item.NomeFuncionario,
                                    matricula: item.Matricula
                                };
                            }));
                        }
                    } );
                },
                minLength: 3,
                select: function (event, ui) {
                    $("#CPF").val(ui.item.cpf);
                    $("#NomeFuncionario").val(ui.item.nome);
                    $("#Matricula").val(ui.item.matricula);
                    $("#NomeUsuario").focus();
                }
            });
        });
    </script>
}
