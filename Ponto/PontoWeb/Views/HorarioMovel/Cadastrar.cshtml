@model Modelo.Horario
@{
    @Html.AntiForgeryToken()
    ViewBag.Title = "Cadastrar Horário Flexível";
    if (Model.IdHorarioDinamico.GetValueOrDefault() > 0)
    {
        ViewBag.Consultar = 1;
        ViewBag.Title = "Cadastrar Horário Dinâmico";
    }
}

<script>
    function HabilidaSelecaoIniFolga() {
        if ($("input[name ='LHorariosFlexiveis'][acao!='Excluir']").length > 0)
            $('#DiaSemanaInicioFolga').attr("disabled", "disabled");
        else
            $('#DiaSemanaInicioFolga').removeAttr('disabled');
    }
</script>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(model => model.Id, new { id = "idHorario", @class = "horario" })
    @Html.HiddenFor(model => model.Incdata, new { @class = "horario" })
    @Html.HiddenFor(model => model.Inchora, new { @class = "horario" })
    @Html.HiddenFor(model => model.Incusuario, new { @class = "horario" })
    @Html.HiddenFor(model => model.Altdata, new { @class = "horario" })
    @Html.HiddenFor(model => model.Althora, new { @class = "horario" })
    @Html.HiddenFor(model => model.Altusuario, new { @class = "horario" })
    @Html.HiddenFor(model => model.TipoHorario, new { @class = "horario" })
    @Html.HiddenFor(model => model.controleHorariosFlexiveis, new { @class = "horario" })
    @Html.HiddenFor(model => model.IdClassificacao, new { @class = "horario" })
    @Html.HiddenFor(model => model.IdHorarioDinamico, new { @class = "horario" })
    @Html.HiddenFor(model => model.CicloSequenciaIndice, new { @class = "horario" })
    @Html.HiddenFor(model => model.DataBaseCicloSequencia, new { @class = "horario" })
    @Html.Hidden("InicioAdNoturno", (object)ViewBag.InicioAdNoturno, new { id = "InicioAdNoturno", @class = "horario" })
    @Html.Hidden("FimAdNoturno", (object)ViewBag.FimAdNoturno, new { id = "FimAdNoturno", @class = "horario" })
    @Html.HiddenFor(model => model.PossuiFechamento, new { @class = "horario" })

    <div class="divCenter">
        <div class="panel panel-default" style="padding-bottom:0; margin-bottom:0px;">
            <div class="panel-heading salvando">
                @Html.ActionLink("X", "Grid", "HorarioMovel", null, new { @id = "btnCancelarX", @class = "close" })
                <h3 class="panel-title titulo-pagina">@ViewBag.Title</h3>
            </div>
            <div class="panel-body panelConteudo" id="panelBodyFixo" style="margin-top:0; padding-top:5px; padding-bottom:0; margin-bottom:0;">
                @Html.ValidationMessage("CustomError")
                @if (!String.IsNullOrEmpty(@ViewBag.MensagemBloqueio))
                {
                    <div class="alert alert-info" role="alert" style="margin-bottom:0">@Html.Raw(ViewBag.MensagemBloqueio)</div>
                }
                @*Tab Panel*@
                <div class="tabbable" style="margin-top:0;">
                    <ul class="nav nav-tabs" id="hnTab">
                        <li class="active"><a href="#pnlTurnoFlexivel" data-toggle="tab" id="liPnlTurnoFlexivel" style="padding:5px;">Turno Flexível</a></li>
                        <li><a href="#pnlParametros" data-toggle="tab" id="liPnlParametros" style="padding:5px;">Parâmetros</a></li>
                        <li><a href="#pnlDSR" data-toggle="tab" id="liPnlDSR" style="padding:5px;">DSR</a></li>
                        @if (Model.IdHorarioDinamico.GetValueOrDefault() == 0)
                        {
                            <li><a href="#pnlInItinere" data-toggle="tab" id="liPnlInItinere" style="padding:5px;">In Itinere</a></li>
                        }
                        <li><a href="#pnlRestricoes" data-toggle="tab" id="liPnlRestricoes" style="padding:5px;">Restrições</a></li>
                    </ul>
                    <div class="tab-content" style="padding-top:5px;">
                        @*Turno Flexível*@
                        <div class="tab-pane fade in active" id="pnlTurnoFlexivel">
                            <div class="row">
                                <div class="col-md-12" style="padding:0px;">
                                    <div class="col-md-12">
                                        <div class="row">
                                            @if (!String.IsNullOrEmpty(Model.HorarioDinamico))
                                            {
                                                <div class="col-md-6">
                                                    @Html.LabelFor(model => model.HorarioDinamico, new { @class = "control-label label-sm" })
                                                    @Html.TextBoxFor(model => model.HorarioDinamico, new { @class = "form-control  input-sm horario" }).IsDisabled(true)
                                                </div>
                                            }
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-2">
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Codigo, new { @class = "control-label label-sm" })
                                                    @Html.TextBoxFor(model => model.Codigo, new { @class = "form-control  input-sm horario" })
                                                    @Html.ValidationMessageFor(model => model.Codigo)
                                                </div>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Descricao, new { @class = "control-label label-sm" })
                                                    @Html.TextBoxFor(model => model.Descricao, new { @class = "form-control  input-sm horario" })
                                                    @Html.ValidationMessageFor(model => model.Descricao)
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-2">
                                                <div class="checkbox">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.Ativo, new { @class = "checkboxHN horario", id = "chkInativarHorario" })
                                                        @Html.LabelFor(model => model.Ativo, new { @class = "control-label label-sm", @for = "chkInativarHorario" })
                                                        @Html.ValidationMessageFor(model => model.Ativo)
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.DescParametro, new { @class = "control-label label-sm" })
                                                    <div class="input-group input-group-sm">
                                                        @Html.TextBoxFor(model => model.DescParametro, new { @class = "form-control  input-sm lkpParametro horario", id = "lkpDescParametro" })
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-primary lkpParametro" id="btnDescParametro" type="button"><span class="glyphicon glyphicon-search"></span></button>
                                                        </span>
                                                    </div>
                                                    @Html.ValidationMessageFor(model => model.DescParametro)
                                                </div>
                                            </div>
                                        </div>
                                        @if (Model.IdHorarioDinamico.GetValueOrDefault() == 0)
                                        {
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        @Html.LabelFor(model => model.DescJornadaCopiar, new { @class = "control-label label-sm" })
                                                        <div class="input-group input-group-sm">
                                                            @Html.TextBoxFor(model => model.DescJornadaCopiar, new { @class = "form-control input-sm lkpJornada horario", id = "lkpJornada" })
                                                            <span class="input-group-btn">
                                                                <button class="btn btn-primary lkpJornada" id="btnJornada" type="button"><span class="glyphicon glyphicon-search"></span></button>
                                                            </span>
                                                        </div>
                                                        @Html.ValidationMessageFor(model => model.DescJornadaCopiar)
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-4" style="padding-right:0px;">
                                                    <div class="panel panel-default" style="min-height:60px">
                                                        <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:0px;">
                                                            <div class="row">
                                                                <div class="col-md-7" style="padding-left:0px; padding-right:0px;">
                                                                    <label class="label-sm pull-right">Horários: </label>
                                                                </div>
                                                                <div class="col-md-5" style="padding-left:0px; padding-right:0px;">
                                                                    @Html.TextBoxFor(model => model.Horariodescricao_1, new { id = "txt_e1", @class = "form-control input-sm time timeJornada timeJornadaE horario", @Style = "background:#CBE5E7;", @placeholder = "--:--" })
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12" style="padding-left:0px; padding-right:0px;">
                                                                    <label class="label-sm">Pré-Assinaladas: </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-2" style="padding-left:0px; padding-right:0px;">
                                                    <div class="panel panel-default" style="min-height:60px">
                                                        <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:3px;">
                                                            <div class="row">
                                                                <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                    @Html.TextBoxFor(model => model.Horariodescricaosai_1, new { id = "txt_s1", @class = "form-control input-sm time timeJornada timeJornadaS horario", @placeholder = "--:--" })
                                                                </div>

                                                                <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                    @Html.TextBoxFor(model => model.Horariodescricao_2, new { id = "txt_e2", @class = "form-control input-sm time timeJornada timeJornadaE horario", @Style = "background:#CBE5E7;", @placeholder = "--:--" })
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12" style="padding-left:0px; padding-right:0px;">
                                                                    @Html.CheckBoxFor(model => model.Preassinaladas1Bool, new { id = "chk_pa1", @class = "chk_pa preassinalada horario" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-2" style="padding-left:0px; padding-right:0px;">
                                                    <div class="panel panel-default" style="min-height:60px">
                                                        <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:3px;">
                                                            <div class="row">
                                                                <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                    @Html.TextBoxFor(model => model.Horariodescricaosai_2, new { id = "txt_s2", @class = "form-control input-sm time timeJornada timeJornadaS horario", @placeholder = "--:--" })
                                                                </div>

                                                                <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                    @Html.TextBoxFor(model => model.Horariodescricao_3, new { id = "txt_e3", @class = "form-control input-sm time timeJornada timeJornadaE horario", @Style = "background:#CBE5E7;", @placeholder = "--:--" })
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12" style="padding-left:0px; padding-right:0px;">
                                                                    @Html.CheckBoxFor(model => model.Preassinaladas2Bool, new { id = "chk_pa2", @class = "chk_pa preassinalada horario" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-2" style="padding-left:0px; padding-right:0px;">
                                                    <div class="panel panel-default" style="min-height:60px">
                                                        <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:3px;">
                                                            <div class="row">
                                                                <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                    @Html.TextBoxFor(model => model.Horariodescricaosai_3, new { id = "txt_s3", @class = "form-control input-sm time timeJornada timeJornadaS horario", @placeholder = "--:--" })
                                                                </div>

                                                                <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                    @Html.TextBoxFor(model => model.Horariodescricao_4, new { id = "txt_e4", @class = "form-control input-sm time timeJornada timeJornadaE horario", @Style = "background:#CBE5E7;", @placeholder = "--:--" })
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12" style="padding-left:0px; padding-right:0px;">
                                                                    @Html.CheckBoxFor(model => model.Preassinaladas3Bool, new { id = "chk_pa3", @class = "chk_pa preassinalada horario" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-2" style="padding-left:0px">
                                                    <div class="panel panel-default" style="min-height:60px">
                                                        <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:0px;">
                                                            <div class="row">
                                                                <div class="col-md-12" style="padding-left:0px; padding-right:0px;">
                                                                    @Html.TextBoxFor(model => model.Horariodescricaosai_4, new { id = "txt_s4", @class = "form-control input-sm time timeJornada timeJornadaS horario", @placeholder = "--:--" })
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12" style="padding-left:0px; padding-right:0px;">
                                                                    <label class="label-sm">&nbsp; </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        }
                                        else
                                        {
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <div class="checkbox" style="margin:1px;">
                                                        <label>
                                                            @Html.CheckBoxFor(model => model.HorasnormaisBool, new { id = "ckbHorasNormaisBool", @class = "horario" })
                                                            @Html.LabelFor(model => model.HorasnormaisBool, new { @class = "control-label label-sm", @for = "ckbHorasNormaisBool" })
                                                            @Html.ValidationMessageFor(model => model.HorasnormaisBool)
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="checkbox" style="margin:1px;">
                                                        <label>
                                                            @Html.CheckBoxFor(model => model.MarcacargahorariamistaBool, new { id = "ckbHorasMistaBool", @class = "horario" })
                                                            @Html.LabelFor(model => model.MarcacargahorariamistaBool, new { @class = "control-label label-sm", @for = "ckbHorasMistaBool" })
                                                            @Html.ValidationMessageFor(model => model.MarcacargahorariamistaBool)
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        }

                                    </div>
                                    @*Componentes da Direita*@
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-6">
                                                @Html.LabelFor(model => model.Limitemin, new { @class = "control-label label-sm editor-label" })
                                                @Html.TextBoxFor(model => model.Limitemin, new { @class = "form-control  input-sm editor-field timeL horario" })
                                                @Html.ValidationMessageFor(model => model.Limitemin)
                                            </div>
                                            <div class="col-md-6">
                                                @Html.LabelFor(model => model.Limitemax, new { @class = "control-label label-sm editor-label" })
                                                @Html.TextBoxFor(model => model.Limitemax, new { @class = "form-control  input-sm editor-field timeL horario" })
                                                @Html.ValidationMessageFor(model => model.Limitemax)
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="checkbox" style="margin:5px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.ConversaohoranoturnaBool, new { @class = "checkboxHN horario", id = "ConversaohoranoturnaBool" })
                                                        @Html.LabelFor(model => model.ConversaohoranoturnaBool, new { @class = "control-label label-sm", @for = "ConversaohoranoturnaBool" })
                                                        @Html.ValidationMessageFor(model => model.ConversaohoranoturnaBool)
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="checkbox" style="margin:5px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.OrdenabilhetesaidaBool, new { @class = "checkboxHN horario", id = "OrdenabilhetesaidaBool" })
                                                        @Html.LabelFor(model => model.OrdenabilhetesaidaBool, new { @class = "control-label label-sm", @for = "OrdenabilhetesaidaBool" })
                                                        @Html.ValidationMessageFor(model => model.OrdenabilhetesaidaBool)
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="checkbox" style="margin:5px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.ConsideraadhtrabalhadasBool, new { @class = "checkboxHN horario", id = "ConsideraadhtrabalhadasBool" })
                                                        @Html.LabelFor(model => model.ConsideraadhtrabalhadasBool, new { @class = "control-label label-sm", id = "lbConsideraadhtrabalhadasBool", @for = "ConsideraadhtrabalhadasBool" })
                                                        @Html.ValidationMessageFor(model => model.ConsideraadhtrabalhadasBool)
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="checkbox" style="margin:5px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.IntervaloautomaticoBool, new { @class = "checkboxHN horario preassinalada", id = "IntervaloautomaticoBool" })
                                                        @Html.LabelFor(model => model.IntervaloautomaticoBool, new { @class = "control-label label-sm", @for = "IntervaloautomaticoBool" })
                                                        @Html.ValidationMessageFor(model => model.IntervaloautomaticoBool)
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="checkbox" style="margin:5px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.Ordem_entBool, new { @class = "checkboxHN horario", id = "Ordem_entBool" })
                                                        @Html.LabelFor(model => model.Ordem_entBool, new { @class = "control-label label-sm", @for = "Ordem_entBool" })
                                                        @Html.ValidationMessageFor(model => model.Ordem_entBool)
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="checkbox" style="margin:5px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.PontoPorExcecao, new { @class = "checkboxHN horario", id = "PontoPorExcecaoBool" })
                                                        @Html.LabelFor(model => model.PontoPorExcecao, new { @class = "control-label label-sm", @for = "PontoPorExcecaoBool" })
                                                        @Html.ValidationMessageFor(model => model.PontoPorExcecao)
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        @if (Model.IdHorarioDinamico.GetValueOrDefault() == 0)
                                        {
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="row">
                                                        <div class="col-md-8">
                                                            <div class="form-group input-group-sm">
                                                                @Html.LabelFor(model => model.DataInicial, new { @class = "control-label label-sm" })
                                                                <div class="input-group input-group-sm">
                                                                    @Html.TextBoxFor(model => model.DataInicial, new { @class = "form-control input-sm MascDate horario", id = "DataInicial" })
                                                                    <span class="input-group-btn">
                                                                        <button class="btn btn-primary desabilitar" id="btnDataInicial" type="button"><span class="glyphicon glyphicon-calendar"></span></button>
                                                                    </span>
                                                                </div>
                                                                @Html.ValidationMessageFor(model => model.DataInicial)
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="row">
                                                        <div class="col-md-8">
                                                            <div class="form-group input-group-sm">
                                                                @Html.LabelFor(model => model.DataFinal, new { @class = "control-label label-sm" })
                                                                <div class="input-group input-group-sm">
                                                                    @Html.TextBoxFor(model => model.DataFinal, new { @class = "form-control input-sm MascDate horario", id = "DataFinal" })
                                                                    <span class="input-group-btn">
                                                                        <button class="btn btn-primary desabilitar" id="btnDataFinal" type="button"><span class="glyphicon glyphicon-calendar"></span></button>
                                                                    </span>
                                                                </div>
                                                                @Html.ValidationMessageFor(model => model.DataFinal)
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="row">
                                                        <div class="col-md-8">
                                                            <div class="panel panel-default">
                                                                <div class="panel-heading" style="padding-bottom:1px; padding-top:1px">
                                                                    <div class="checkbox" style="margin:1px;">
                                                                        <label>
                                                                            @Html.CheckBoxFor(model => model.HorasnormaisBool, new { id = "ckbHorasNormaisBool", @class = "horario" })
                                                                            @Html.LabelFor(model => model.HorasnormaisBool, new { @class = "control-label label-sm", @for = "ckbHorasNormaisBool" })
                                                                            @Html.ValidationMessageFor(model => model.HorasnormaisBool)
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:3px;">
                                                                    <div class="row">
                                                                        <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                            @Html.TextBoxFor(model => model.CargaDiurna, new { @class = "form-control input-sm time timeTotalizador horario", @placeholder = "--:--" })
                                                                        </div>
                                                                        <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                            @Html.TextBoxFor(model => model.CargaNoturna, new { @class = "form-control input-sm time timeTotalizador horario", @Style = "background:#CBE5E7;", @placeholder = "--:--" })
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="row">
                                                        <div class="col-md-8">
                                                            <div class="panel panel-default">
                                                                <div class="panel-heading" style="padding-bottom:1px; padding-top:1px">
                                                                    <div class="checkbox" style="margin:1px;">
                                                                        <label>
                                                                            @Html.CheckBoxFor(model => model.MarcacargahorariamistaBool, new { id = "ckbHorasMistaBool", @class = "horario" })
                                                                            @Html.LabelFor(model => model.MarcacargahorariamistaBool, new { @class = "control-label label-sm", @for = "ckbHorasMistaBool" })
                                                                            @Html.ValidationMessageFor(model => model.MarcacargahorariamistaBool)
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:3px;">
                                                                    <div class="row">
                                                                        <div class="col-md-4" style="padding-left:0px; padding-right:0px;">
                                                                        </div>
                                                                        <div class="col-md-4" style="padding-left:0px; padding-right:0px;">
                                                                            @Html.TextBoxFor(model => model.CargaMista, new { id = "txtTotalMista", @class = "form-control input-sm time timeTotalizador horario", @placeholder = "--:--" })
                                                                        </div>
                                                                        <div class="col-md-4" style="padding-left:0px; padding-right:0px;">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    </div>
                                </div>
                            </div>
                            @if (Model.IdHorarioDinamico.GetValueOrDefault() == 0)
                            {
                                <div class="col-md-12" style="margin-top:5px;">
                                    <div class="row">
                                        <div class="panel panel-default">
                                            <div class="panel-footer" style="padding-top:2px; padding-bottom:2px">
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <button class="btn btn-sm btn-primary btnGeraHorarioFlexivel" id="btn5P1" type="button">
                                                            <span class="glyphicon glyphicon-hand-up">
                                                            </span> 5/1
                                                        </button>
                                                        <button class="btn btn-sm btn-primary btnGeraHorarioFlexivel" id="btn12P36" type="button">
                                                            <span class="glyphicon glyphicon-hand-up">
                                                            </span> 12/36
                                                        </button>
                                                        <button class="btn btn-sm btn-primary btnGeraHorarioFlexivel" id="btn24P48" type="button">
                                                            <span class="glyphicon glyphicon-hand-up">
                                                            </span> 24/48
                                                        </button>
                                                        <button class="btn btn-sm btn-primary btnGeraHorarioFlexivel" id="btn6P1" type="button">
                                                            <span class="glyphicon glyphicon-hand-up">
                                                            </span> 6/1
                                                        </button>
                                                        <button class="btn btn-sm btn-primary btnGeraHorarioFlexivel" id="btn6P2" type="button">
                                                            <span class="glyphicon glyphicon-hand-up">
                                                            </span> 6/2
                                                        </button>
                                                        <button class="btn btn-sm btn-primary btnGeraHorarioFlexivel" id="btn12P60" type="button">
                                                            <span class="glyphicon glyphicon-hand-up">
                                                            </span> 12/60
                                                        </button>
                                                        <button class="btn btn-sm btn-primary btnGeraHorarioFlexivel" id="btnTCompleto" type="button">
                                                            <span class="glyphicon glyphicon-hand-up">
                                                            </span> Turno Completo
                                                        </button>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            @Html.LabelFor(model => model.DiaSemanaInicioFolga, new { @class = "control-label label-sm" })
                                                            @Html.DropDownListFor(model => model.DiaSemanaInicioFolga, @ViewBag.ListaDiaSemanaIniFolga as List<SelectListItem>, new { @class = "form-control input-sm horario", style = "height: 25px;" })
                                                            @Html.ValidationMessageFor(model => model.DiaSemanaInicioFolga)
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div style="text-align:right">
                                                            <button class="btn btn-sm btn-primary btn-danger btnGeraHorarioFlexivel" id="btnExcluirHorarios" type="button">
                                                                <span class="glyphicon glyphicon-trash">
                                                                </span>  Excluir Horários
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                            else
                            {
                                <div class="row">
                                    <div class="col-md-12" id="divHorarioDinamicoDetalhes">

                                    </div>
                                </div>
                            }
                            @*Manutenção Horario Detalhe*@
                            <div id="ManutencaoHorarioDetalhe">
                                <div class="modal" style="padding-top: 150px; background: rgba(0, 0, 0, 0.4);" id="divManutHorario" accesskey="" data-keyboard="false" data-backdrop="static">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" id="btnDivManutHorarioFechar"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                                                <h3 class="panel-title titulo-pagina">Alterando Horário Detalhe</h3>
                                            </div>
                                            <div class="modal-body">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            @Html.Label("Data", new { @class = "control-label label-sm" })
                                                            @Html.TextBox("DataManut", "", new { @class = "form-control input-sm date", disabled = "disabled" })
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div>&nbsp;</div>
                                                        <div class="checkbox" style="margin:5px">
                                                            <label>
                                                                @Html.CheckBox("CkbFolgManut", false)
                                                                @Html.Label("Folga", new { @class = "control-label label-sm", @for = "CkbFolgManut" })
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div>&nbsp;</div>
                                                        <div class="checkbox" style="margin:5px">
                                                            <label>
                                                                @Html.CheckBox("CkbDSRManut", false)
                                                                @Html.Label("DSR", new { @class = "control-label label-sm", @for = "CkbDSRManut" })
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div>&nbsp;</div>
                                                        <div class="checkbox" style="margin:5px">
                                                            <label>
                                                                @Html.CheckBox("CkbIntervaloAutomaticoManut", false)
                                                                @Html.Label("Intervalo Automatico", new { @class = "control-label label-sm", @for = "CkbIntervaloAutomaticoManut" })
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="form-group">
                                                            @Html.Label("Jornada", new { @class = "control-label label-sm" })
                                                            <div class="input-group input-group-sm">
                                                                @Html.TextBox("lkpJornadaManut", "", new { @class = "form-control input-sm lkpJornadaManut" })
                                                                <span class="input-group-btn">
                                                                    <button class="btn btn-primary lkpJornadaManut" id="btnJornadaManut" type="button"><span class="glyphicon glyphicon-search"></span></button>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        @Html.ValidationMessage("lkpJornadaManut")
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="row">
                                                            <div class="col-md-4" style="padding-right:0px;">
                                                                <div class="panel panel-default" style="min-height:60px">
                                                                    <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:0px;">
                                                                        <div class="row">
                                                                            <div class="col-md-7" style="padding-left:0px; padding-right:0px;">
                                                                                <label class="label-sm pull-right">Horários: </label>
                                                                            </div>
                                                                            <div class="col-md-5" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.TextBox("ManutTxt_e1", "", new { id = "ManutTxt_e1", @class = "form-control input-sm time ManutTimeJornada ManutTimeJornadaE", @Style = "background:#CBE5E7;", @placeholder = "--:--" })
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-md-12" style="padding-left:0px; padding-right:0px;">
                                                                                <label class="label-sm">Pré-Assinaladas: </label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2" style="padding-left:0px; padding-right:0px;">
                                                                <div class="panel panel-default" style="min-height:60px">
                                                                    <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:3px;">
                                                                        <div class="row">
                                                                            <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.TextBox("ManutTxt_s1", "", new { @class = "form-control input-sm time ManutTimeJornada ManutTimeJornadaS", @placeholder = "--:--" })
                                                                            </div>

                                                                            <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.TextBox("ManutTxt_e2", "", new { @class = "form-control input-sm time ManutTimeJornada ManutTimeJornadaE", @Style = "background:#CBE5E7;", @placeholder = "--:--" })
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-md-12" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.CheckBox("ManutChk_pa1", false, new { @class = "ManutChk_pa" })
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2" style="padding-left:0px; padding-right:0px;">
                                                                <div class="panel panel-default" style="min-height:60px">
                                                                    <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:3px;">
                                                                        <div class="row">
                                                                            <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.TextBox("ManutTxt_s2", "", new { @class = "form-control input-sm time ManutTimeJornada ManutTimeJornadaS", @placeholder = "--:--" })
                                                                            </div>

                                                                            <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.TextBox("ManutTxt_e3", "", new { @class = "form-control input-sm time ManutTimeJornada ManutTimeJornadaE", @Style = "background:#CBE5E7;", @placeholder = "--:--" })
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-md-12" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.CheckBox("ManutChk_pa2", false, new { @class = "ManutChk_pa" })
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2" style="padding-left:0px; padding-right:0px;">
                                                                <div class="panel panel-default" style="min-height:60px">
                                                                    <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:3px;">
                                                                        <div class="row">
                                                                            <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.TextBox("ManutTxt_s3", "", new { @class = "form-control input-sm time ManutTimeJornada ManutTimeJornadaS", @placeholder = "--:--" })
                                                                            </div>

                                                                            <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.TextBox("ManutTxt_e4", "", new { @class = "form-control input-sm time ManutTimeJornada ManutTimeJornadaE", @Style = "background:#CBE5E7;", @placeholder = "--:--" })
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-md-12" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.CheckBox("ManutChk_pa3", false, new { id = "ManutChk_pa3", @class = "ManutChk_pa" })
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2" style="padding-left:0px">
                                                                <div class="panel panel-default" style="min-height:60px">
                                                                    <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:0px;">
                                                                        <div class="row">
                                                                            <div class="col-md-12" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.TextBox("ManutTxt_s4", "", new { @class = "form-control input-sm time ManutTimeJornada ManutTimeJornadaS", @placeholder = "--:--" })
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-md-12" style="padding-left:0px; padding-right:0px;">
                                                                                <label class="label-sm">&nbsp; </label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row hide" style="margin-top:5px">
                                                    <div class="col-md-4">
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="panel panel-default">
                                                                    <div class="panel-heading" style="padding-bottom:1px; padding-top:1px">
                                                                        <div class="checkbox" style="margin:1px;">
                                                                            <label>
                                                                                @Html.CheckBox("ManutCkbHorasNormais", false)
                                                                                @Html.LabelFor(model => model.HorasnormaisBool, new { @class = "control-label label-sm", @for = "ManutCkbHorasNormais" })
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                    <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:3px;">
                                                                        <div class="row">
                                                                            <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.TextBox("ManutCargaDiurna", "", new { @class = "form-control input-sm time ManutTimeTotalizador", @placeholder = "--:--" })
                                                                            </div>
                                                                            <div class="col-md-6" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.TextBox("ManutCargaNoturna", "", new { @class = "form-control input-sm time ManutTimeTotalizador", @Style = "background:#CBE5E7;", @placeholder = "--:--" })
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="panel panel-default">
                                                                    <div class="panel-heading" style="padding-bottom:1px; padding-top:1px">
                                                                        <div class="checkbox" style="margin:1px;">
                                                                            <label>
                                                                                @Html.CheckBox("ManutCkbHorasMista", false)
                                                                                @Html.LabelFor(model => model.MarcacargahorariamistaBool, new { @class = "control-label label-sm", @for = "ManutCkbHorasMista" })
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                    <div class="panel-body" style="text-align: center; padding-top:5px; padding-bottom:3px;">
                                                                        <div class="row">
                                                                            <div class="col-md-4" style="padding-left:0px; padding-right:0px;">
                                                                            </div>
                                                                            <div class="col-md-4" style="padding-left:0px; padding-right:0px;">
                                                                                @Html.TextBox("ManutTxtTotalMista", "", new { @class = "form-control input-sm time ManutTimeTotalizador", @placeholder = "--:--" })
                                                                            </div>
                                                                            <div class="col-md-4" style="padding-left:0px; padding-right:0px;">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer" style="margin-top:0">
                                                <div style="text-align: right">
                                                    <button class="btn btn-sm btn-success salvando btnModal" type="button" id="btnDivManutHorarioSalvar"><span class="glyphicon glyphicon-ok-circle salvando"></span>&nbsp;Salvar&nbsp;&nbsp;</button>
                                                    <button class="btn btn-sm btn-danger salvando btnModal btnClose" type="button" id="btnDivManutHorarioCancelar"><span class="glyphicon glyphicon-remove"></span>&nbsp;Cancelar&nbsp;&nbsp;</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            @*Horáro Detalhe*@
                            <div style="height:320px">
                                <div id="GridHorariosFlexiveis">@{ Html.RenderPartial("_GridHorariosFlexiveis", Model); }</div>
                            </div>
                        </div>
                        @*Parâmetros*@
                        <div class="tab-pane fade" id="pnlParametros">
                            <div class="col-md-7" style="padding:0px;">
                                <div class="panel panel-default" style="margin-bottom:5px;">
                                    <div class="panel-heading" style="padding-top:2px; padding-bottom:0">
                                        <div class="row">
                                            <div class="col-md-4">
                                                @Html.Label("Horas Extras em %", new { @class = "control-label label-sm" })
                                            </div>
                                            <div class="col-md-8">
                                                <div class="checkbox" style="margin:0;padding-top:5px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.SeparaExtraNoturnaPercentual, new { @class = "horario" })
                                                        @Html.LabelFor(model => model.SeparaExtraNoturnaPercentual, new { @class = "control-label label-sm horario " })
                                                        @Html.ValidationMessageFor(model => model.SeparaExtraNoturnaPercentual)
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-body" style="padding-top:5px;">
                                        @*Tipo Acumulo*@
                                        <div class="panel panel-default" style="margin-bottom:5px">
                                            <div class="panel-heading" style="padding-top:2px; padding-bottom:0">
                                                @Html.LabelFor(model => model.Tipoacumulo, new { @class = "control-label label-sm" })
                                            </div>
                                            <div class="panel-body" style="padding-top:5px; padding-bottom:5px">
                                                <div class="col-md-4">
                                                    <div class="radio-inline" data-toggle="radio">
                                                        @Html.RadioButtonFor(model => model.Tipoacumulo, 1, new { id = "idRadioDiario", name = "rdio", @class = "horario" })
                                                        @Html.Label("lbDiario", "Diário", new { @class = "control-label label-sm", @for = "idRadioDiario" })
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="radio-inline" data-toggle="radio">
                                                        @Html.RadioButtonFor(model => model.Tipoacumulo, 2, new { id = "idRadioSemanal", name = "rdio", @class = "horario" })
                                                        @Html.Label("lbSemanal", "Semanal", new { @class = "control-label label-sm", @for = "idRadioSemanal" })
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="radio-inline" data-toggle="radio">
                                                        @Html.RadioButtonFor(model => model.Tipoacumulo, 3, new { id = "idRadioMensal", name = "rdio", @class = "horario" })
                                                        @Html.Label("lbMensal", "Mensal", new { @class = "control-label label-sm", @for = "idRadioMensal" })
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    @Html.ValidationMessageFor(model => model.Tipoacumulo)
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3"></div>
                                            <div class="col-md-9">
                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <div class="row separaPercentualNoturno">
                                                            <div class="col-md-12" style="text-align:center">
                                                                @Html.Label("", "Diurno", new { @class = "control-label label-sm" })
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6" style="text-align:center">
                                                                @Html.Label("", "Percentual", new { @class = "control-label label-sm" })
                                                            </div>
                                                            <div class="col-md-6" style="text-align:center">
                                                                @Html.Label("", "Limite", new { @class = "control-label label-sm" })
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-4 separaPercentualNoturno">
                                                        <div class="row">
                                                            <div class="col-md-12" style="text-align:center">
                                                                @Html.Label("", "Noturno", new { @class = "control-label label-sm" })
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6" style="text-align:center">
                                                                @Html.Label("", "Percentual", new { @class = "control-label label-sm" })
                                                            </div>
                                                            <div class="col-md-6" style="text-align:center">
                                                                @Html.Label("", "Limite", new { @class = "control-label label-sm" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12" style="padding-top:5px;">
                                            @Html.EditorFor(model => model.LHorariosPHExtra)
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-5" style="padding-right:0">
                                <div class="panel panel-default" style="margin-bottom:10px;">
                                    <div class="panel-heading" style="padding-top:2px; padding-bottom:0">
                                        @Html.Label("Intervalo de Café", new { @class = "control-label label-sm" })
                                    </div>
                                    <div class="panel-body" style="padding-top:5px;">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="checkbox" style="margin:0px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.Habilitaperiodo01Bool, new { @class = "ckbIntervaloCafe horario", id = "Habilitaperiodo01Bool" })
                                                        @Html.LabelFor(model => model.Habilitaperiodo01Bool, new { @class = "control-label label-sm", @for = "Habilitaperiodo01Bool" })
                                                        @Html.ValidationMessageFor(model => model.Habilitaperiodo01Bool)
                                                    </label>
                                                </div>
                                                <div class="checkbox" style="margin:0px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.Habilitaperiodo02Bool, new { @class = "ckbIntervaloCafe horario", id = "Habilitaperiodo02Bool" })
                                                        @Html.LabelFor(model => model.Habilitaperiodo02Bool, new { @class = "control-label label-sm", @for = "Habilitaperiodo02Bool" })
                                                        @Html.ValidationMessageFor(model => model.Habilitaperiodo02Bool)
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="checkbox" style="margin:0px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.DescontacafemanhaBool, new { @class = "ckbIntervaloCafe horario", id = "DescontacafemanhaBool" })
                                                        @Html.LabelFor(model => model.DescontacafemanhaBool, new { @class = "control-label label-sm", @for = "DescontacafemanhaBool" })
                                                        @Html.ValidationMessageFor(model => model.DescontacafemanhaBool)
                                                    </label>
                                                </div>
                                                <div class="checkbox" style="margin:0px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.DescontacafetardeBool, new { @class = "ckbIntervaloCafe horario", id = "DescontacafetardeBool" })
                                                        @Html.LabelFor(model => model.DescontacafetardeBool, new { @class = "control-label label-sm", @for = "DescontacafetardeBool" })
                                                        @Html.ValidationMessageFor(model => model.DescontacafetardeBool)
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default">
                                    <div class="panel-heading" style="padding-top:2px; padding-bottom:0">
                                        @Html.Label("Dias para Intervalo de Café", new { @class = "control-label label-sm" })
                                    </div>
                                    <div class="panel-body" style="padding-top:5px;">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <div class="checkbox" style="margin:0px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.Dias_cafe_1Bool, new { @class = "ckbIntervaloCafeDias horario", id = "DiasCafe1" })
                                                        @Html.LabelFor(model => model.Dias_cafe_1Bool, new { @class = "control-label label-sm", @for = "DiasCafe1" })
                                                        @Html.ValidationMessageFor(model => model.Dias_cafe_1Bool)
                                                    </label>
                                                </div>
                                                <div class="checkbox" style="margin:0px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.Dias_cafe_5Bool, new { @class = "ckbIntervaloCafeDias horario", id = "DiasCafe5" })
                                                        @Html.LabelFor(model => model.Dias_cafe_5Bool, new { @class = "control-label label-sm", @for = "DiasCafe5" })
                                                        @Html.ValidationMessageFor(model => model.Dias_cafe_5Bool)
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="checkbox" style=" margin:0px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.Dias_cafe_2Bool, new { @class = "ckbIntervaloCafeDias horario", id = "DiasCafe2" })
                                                        @Html.LabelFor(model => model.Dias_cafe_2Bool, new { @class = "control-label label-sm", @for = "DiasCafe2" })
                                                        @Html.ValidationMessageFor(model => model.Dias_cafe_2Bool)
                                                    </label>
                                                </div>
                                                <div class="checkbox" style="margin:0px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.Dias_cafe_6Bool, new { @class = "ckbIntervaloCafeDias horario", id = "DiasCafe6" })
                                                        @Html.LabelFor(model => model.Dias_cafe_6Bool, new { @class = "control-label label-sm", @for = "DiasCafe6" })
                                                        @Html.ValidationMessageFor(model => model.Dias_cafe_6Bool)
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="checkbox" style=" margin:0px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.Dias_cafe_3Bool, new { @class = "ckbIntervaloCafeDias horario", id = "DiasCafe3" })
                                                        @Html.LabelFor(model => model.Dias_cafe_3Bool, new { @class = "control-label label-sm", @for = "DiasCafe3" })
                                                        @Html.ValidationMessageFor(model => model.Dias_cafe_3Bool)
                                                    </label>
                                                </div>
                                                <div class="checkbox" style="margin:0px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.Dias_cafe_7Bool, new { @class = "ckbIntervaloCafeDias horario", id = "DiasCafe7" })
                                                        @Html.LabelFor(model => model.Dias_cafe_7Bool, new { @class = "control-label label-sm", @for = "DiasCafe7" })
                                                        @Html.ValidationMessageFor(model => model.Dias_cafe_7Bool)
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="checkbox" style=" margin:0px">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.Dias_cafe_4Bool, new { @class = "ckbIntervaloCafeDias horario", id = "DiasCafe4" })
                                                        @Html.LabelFor(model => model.Dias_cafe_4Bool, new { @class = "control-label label-sm", @for = "DiasCafe4" })
                                                        @Html.ValidationMessageFor(model => model.Dias_cafe_4Bool)
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="checkbox style=">
                                            <label>
                                                @Html.CheckBoxFor(model => model.DesconsiderarFeriadoBool, new { id = "DesconsiderarFeriadoBool", @class = "horario" })
                                                @Html.LabelFor(model => model.DesconsiderarFeriadoBool, new { @class = "control-label label-sm", id = "DesconsiderarFeriado", title = "Quando selecionado este parâmetro, o feriado não será considerado no horário.", @for = "DesconsiderarFeriadoBool" })
                                                @Html.ValidationMessageFor(model => model.DesconsiderarFeriadoBool)
                                            </label>
                                        </div>
                                        <div class="checkbox style=">
                                            <label>
                                                @Html.CheckBoxFor(model => model.ConsiderasabadosemanaBool, new { id = "ConsiderasabadosemanaBool", @class = "horario" })
                                                @Html.LabelFor(model => model.ConsiderasabadosemanaBool, new { @class = "control-label label-sm", @for = "ConsiderasabadosemanaBool" })
                                                @Html.ValidationMessageFor(model => model.ConsiderasabadosemanaBool)
                                            </label>
                                        </div>
                                        <div class="checkbox">
                                            <label>
                                                @Html.CheckBoxFor(model => model.ConsideradomingosemanaBool, new { id = "ConsideradomingosemanaBool", @class = "horario" })
                                                @Html.LabelFor(model => model.ConsideradomingosemanaBool, new { @class = "control-label label-sm", @for = "ConsideradomingosemanaBool" })
                                                @Html.ValidationMessageFor(model => model.ConsideradomingosemanaBool)
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12" style="padding-right:0px; padding-left:0px;">
                                        <div class="col-md-5">
                                            @Html.LabelFor(model => model.LimiteHorasTrabalhadasDia, new { @class = "control-label label-sm", @for = "LimiteHorasTrabalhadasDia" })
                                            @Html.TextBoxFor(model => model.LimiteHorasTrabalhadasDia, new { @class = "form-control horario input-sm timeL", id = "LimiteHorasTrabalhadasDia", @placeholder = "10:00" })
                                            @Html.ValidationMessageFor(model => model.LimiteHorasTrabalhadasDia)
                                        </div>
                                        <div class="col-md-3">
                                            @Html.LabelFor(model => model.LimiteMinimoHorasAlmoco, new { @class = "control-label label-sm", @for = "LimiteMinimoHorasAlmoco" })
                                            @Html.TextBoxFor(model => model.LimiteMinimoHorasAlmoco, new { @class = "form-control horario input-sm timeL", id = "LimiteMinimoHorasAlmoco", @placeholder = "01:00" })
                                            @Html.ValidationMessageFor(model => model.LimiteMinimoHorasAlmoco)
                                        </div>
                                        <div class="col-md-4">
                                            @Html.LabelFor(model => model.LimiteInterjornada, new { @class = "control-label label-sm", @for = "txtLimiteInterjornada" })
                                            @Html.TextBoxFor(model => model.LimiteInterjornada, new { @class = "form-control horario input-sm timeL", id = "txtLimiteInterjornada", @placeholder = "11:00" })
                                            @Html.ValidationMessageFor(model => model.LimiteInterjornada)
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default" style=" margin-top:5px;">
                                    <div class="panel-heading" style="padding-top:2px; padding-bottom:0;">
                                        @Html.Label("Tipo de Horário", new { @class = "control-label label-sm" })
                                    </div>
                                    <div class="panel-body">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group input-group-sm">
                                                    <div class="col-md-6">
                                                        <div class="radio" data-toggle="radio">
                                                            @Html.RadioButtonFor(model => model.HoristaMensalista, 0, new { @class = "horario" })
                                                            <label class="label-sm control-label" for="rdbMensalista">Mensalista</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="radio" data-toggle="radio">
                                                            @Html.RadioButtonFor(model => model.HoristaMensalista, 1, new { @class = "horario" })
                                                            <label class="label-sm control-label" for="rdbHorista">Horista</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.Obs, new { @class = "control-label label-sm" })
                                            @Html.TextAreaFor(model => model.Obs, new { @class = "form-control  input-sm horario" })
                                            @Html.ValidationMessageFor(model => model.Obs)
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default" style=" margin-top:5px;">
                                    <div class="panel-heading" style="padding-top:2px; padding-bottom:0;">
                                        @Html.Label("Pré-classificacação Horas Extras", new { @class = "control-label label-sm" })
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.QtdHEPreClassificadas, new { @class = "control-label label-sm" })
                                                    @Html.TextBoxFor(model => model.QtdHEPreClassificadas, new { @class = "form-control input-sm timeL horario" })
                                                </div>
                                            </div>

                                            <div class="col-md-9">
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.DescClassificacao, new { @class = "control-label label-sm" })
                                                    <div class="input-group input-group-sm">
                                                        @Html.TextBoxFor(model => model.DescClassificacao, new { @class = "form-control input-sm lkpCodigoDescricaoClassificacao editor-field horario", id = "lkpCodigoDescricaoClassificacao" })
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-primary lkpCodigoDescricaoClassificacao" id="btnCodigoDescricaoClassificacao" type="button"><span class="glyphicon glyphicon-search"></span></button>
                                                        </span>
                                                    </div>
                                                    @Html.ValidationMessageFor(model => model.QtdHEPreClassificadas)
                                                    @Html.ValidationMessageFor(model => model.DescClassificacao)
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        @*TAB DSR*@
                        <div class="tab-pane fade" id="pnlDSR">
                            @Html.HiddenFor(model => model.bUtilizaDDSRProporcional, new { id = "bUtilizaDDSRProporcional", @class = "horario" })
                            @Html.HiddenFor(model => model.DSRPorPercentual, new { id = "DSRPorPercentual", @class = "horario" })
                            <div class="col-md-8">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="checkbox">
                                            <label>
                                                @Html.CheckBoxFor(model => model.DescontardsrBool, new { id = "DescontardsrBool", @class = "horario" })
                                                @Html.LabelFor(model => model.DescontardsrBool, new { @class = "control-label label-sm", @for = "DescontardsrBool" })
                                                @Html.ValidationMessageFor(model => model.DescontardsrBool)
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="checkbox">
                                            <label>
                                                @Html.CheckBoxFor(model => model.DescontarFeriadoDDSR, new { id = "DesconsiderarFeriadoDDSR", @class = "horario" })
                                                @Html.LabelFor(model => model.DescontarFeriadoDDSR, new { @class = "control-label label-sm", @for = "DesconsiderarFeriadoDDSR" })
                                                @Html.ValidationMessageFor(model => model.DescontarFeriadoDDSR)
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        @Html.ValidationMessageFor(model => model.bUtilizaDDSRProporcional)
                                        @Html.ValidationMessageFor(model => model.DSRPorPercentual)
                                    </div>
                                </div>

                                <div class="panel panel-default" style="margin-bottom:5px">
                                    <div class="panel-heading" style="padding-top:2px; padding-bottom:2px">
                                        <div class="row">
                                            <div class="col-md-2">
                                                @Html.Label("lbTipoDSR", "Tipo DSR", new { @class = "control-label label-sm" })
                                            </div>
                                            <div class="col-md-3">
                                                <div class="radio-inline" data-toggle="radio">
                                                    @Html.RadioButton("rTipoDSR", 1, new { id = "idRadioCLT", @class = "horario" })
                                                    @Html.Label("lbTipoDSRCLT", "Padrão CLT", new { @class = "control-label label-sm", @for = "idRadioCLT" })
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="radio-inline" data-toggle="radio">
                                                    @Html.RadioButton("rTipoDSR", 2, new { id = "idRadioProporcional", @class = "horario" })
                                                    @Html.Label("lbTipoDSRProporcional", "Proporcional", new { @class = "control-label label-sm", @for = "idRadioProporcional" })
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="radio-inline" data-toggle="radio">
                                                    @Html.RadioButton("rTipoDSR", 3, new { id = "idRadioPercentual", @class = "horario" })
                                                    @Html.Label("lbTipoDSRPercentual", "Percentual", new { @class = "control-label label-sm", @for = "idRadioPercentual" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-body" style="padding-top:5px;">
                                        <div class="row" id="divddsrfixo">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Qtdhorasdsr, new { @class = "control-label label-sm" })
                                                    @Html.TextBoxFor(model => model.Qtdhorasdsr, new { @class = "form-control  input-sm timeL horario", id = "Qtdhorasdsr" })
                                                    @Html.ValidationMessageFor(model => model.Qtdhorasdsr)
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Limiteperdadsr, new { @class = "control-label label-sm" })
                                                    @Html.TextBoxFor(model => model.Limiteperdadsr, new { @class = "form-control  input-sm timeL horario", id = "Limiteperdadsr" })
                                                    @Html.ValidationMessageFor(model => model.Limiteperdadsr)
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="checkbox">
                                                    <label>
                                                        @Html.CheckBoxFor(model => model.DDSRConsideraFaltaDuranteSemana, new { id = "DDSRConsideraFaltaDuranteSemana", @class = "horario" })
                                                        @Html.LabelFor(model => model.DDSRConsideraFaltaDuranteSemana, new { @class = "control-label label-sm", @for = "DDSRConsideraFaltaDuranteSemana" })
                                                        @Html.ValidationMessageFor(model => model.DDSRConsideraFaltaDuranteSemana)
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row" id="divDescontohorasdsr">
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Descontohorasdsr, new { @class = "control-label label-sm" })
                                                    <div class="input-group input-group-sm">
                                                        @Html.TextBoxFor(model => model.Descontohorasdsr, new { @class = "form-control input-sm decimalPercent horario", id = "Descontohorasdsr", aria_describedby = "basic-addon2" })
                                                        <span class="input-group-addon" id="basic-addon2">%</span>
                                                    </div>

                                                    @Html.ValidationMessageFor(model => model.Descontohorasdsr)
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row" id="divddsrprop">
                                            <div class="col-md-12">
                                                <div class="panel panel-default">
                                                    <div class="panel-heading" style="padding-top:2px; padding-bottom:0">
                                                        @Html.LabelFor(model => model.LimitesDDsrProporcionais, new { @class = "control-label label-sm" })
                                                    </div>
                                                    <div class="panel-body" style="padding-top:5px; padding-bottom:5px">
                                                        <div class="row">
                                                            @Html.ValidationMessageFor(model => model.LimitesDDsrProporcionais)
                                                        </div>
                                                        <div class="row">
                                                            <div id="limitesDDSR">
                                                                @Html.EditorFor(model => model.LimitesDDsrProporcionais)
                                                            </div>
                                                        </div>
                                                        <div class="row" style="padding-top:10px; text-align:right;">
                                                            @Html.LinkToAddNestedForm("Adicionar", "#limitesDDSR", ".limiteDDSR", "LimitesDDsrProporcionais",
                                                                typeof(Modelo.LimiteDDsr), "Codigo", null)
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        @*In Itinere*@
                        <div class="tab-pane fade" id="pnlInItinere">
                            <div class="col-md-6" style="padding-left:0px;">
                                <div class="panel panel-default">
                                    <div class="panel-heading" style="padding-top:2px; padding-bottom:0">
                                        @Html.LabelFor(model => model.HabilitaInItinere, new { @class = "control-label label-sm" })

                                    </div>
                                    <div class="panel-body" style="padding-top:5px; padding-bottom:5px">
                                        <div class="col-md-3">
                                            <div class="radio-inline" data-toggle="radio">
                                                @Html.RadioButtonFor(model => model.HabilitaInItinere, 0, new { id = "idRadioNaoSeAplica", name = "rdio", @class = "horario HabilitaInItinere" })
                                                @Html.Label("lbNaoSeAplica", "Não se Aplica", new { @class = "control-label label-sm", @for = "idRadioNaoSeAplica" })
                                            </div>
                                        </div>
                                        <div class="col-md-5">
                                            <div class="radio-inline" data-toggle="radio">
                                                @Html.RadioButtonFor(model => model.HabilitaInItinere, 1, new { id = "idRadioPrimeiroeUltimoRegPonto", name = "rdio", @class = "horario HabilitaInItinere" })
                                                @Html.Label("lbPrimeiroUltimoRegPonto", "Primeiro e último registro de ponto", new { @class = "control-label label-sm", @for = "idRadioPrimeiroeUltimoRegPonto" })
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="radio-inline" data-toggle="radio">
                                                @Html.RadioButtonFor(model => model.HabilitaInItinere, 2, new { id = "idRadioPrimeiroeUltimointervalo", name = "rdio", @class = "horario HabilitaInItinere" })
                                                @Html.Label("lbPrimeiroUltimoIntervalo", "Primeiro e último intervalo", new { @class = "control-label label-sm", @for = "idRadioPrimeiroeUltimointervalo" })
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            @Html.ValidationMessageFor(model => model.HabilitaInItinere)
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12" style="padding-top:5px" id="pnlParametrosInItinere">
                                        <div class="panel panel-default">
                                            <div class="panel-heading" style="padding-top:2px; padding-bottom:0">
                                                @Html.Label("Descontar", new { @class = "control-label label-sm" })
                                            </div>
                                            <div class="panel-body" style="padding-top:5px; padding-bottom:5px">
                                                <div class="row">
                                                    <div class="col-md-12">


                                                        <div class="col-md-3">
                                                            <div class="checkbox">
                                                                <label>
                                                                    @Html.CheckBoxFor(model => model.DescontarAtrasoInItinere, new { id = "DescontarAtrasoInItinere", @class = "horario" })
                                                                    @Html.LabelFor(model => model.DescontarAtrasoInItinere, new { @class = "control-label label-sm", @for = "DescontarAtrasoInItinere" })
                                                                    @Html.ValidationMessageFor(model => model.DescontarAtrasoInItinere)
                                                                </label>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="checkbox">
                                                                <label>
                                                                    @Html.CheckBoxFor(model => model.DescontarFaltaInItinere, new { id = "DescontarFaltaInItinere", @class = "horario" })
                                                                    @Html.LabelFor(model => model.DescontarFaltaInItinere, new { @class = "control-label label-sm", @for = "DescontarFaltaInItinere" })
                                                                    @Html.ValidationMessageFor(model => model.DescontarFaltaInItinere)
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="col-md-6" style="padding-right:15px;" id="pnlInItinerePercentuais">
                                <div class="panel panel-default">
                                    <div class="panel-heading" style="padding-top:2px; padding-bottom:0">
                                        @Html.Label("% Adicional", new { @class = "control-label label-sm" })
                                    </div>
                                    <div class="panel-body" style="padding-top:5px; padding-bottom:5px">

                                        <div class="row">
                                            <div class="col-md-4">
                                                @Html.Label("Dia", new { @class = "control-label label-sm" })
                                            </div>

                                            <div class="col-md-4">
                                                @Html.Label("Dentro Jornada", new { @class = "control-label label-sm" })
                                            </div>

                                            <div class="col-md-3">
                                                @Html.Label("Fora Jornada", new { @class = "control-label label-sm" })
                                            </div>
                                        </div>
                                        @Html.EditorFor(model => model.LHorariosAItinere)
                                    </div>
                                </div>
                            </div>
                        </div>

                        @*Restrições*@
                        <div class="tab-pane fade" id="pnlRestricoes">
                            @Html.Partial("_HorarioRestricao", Model)
                        </div>
                        @*Encerra div class*@
                    </div>
                </div>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-xs-12 center-block">
                        <div style="text-align: right">
                            <button type="submit" class="btn btn-success btn-sm salvando" id="btnSalvarHorarioFlexivel">
                                <span class="glyphicon glyphicon-ok-circle"></span> &nbsp;Salvar&nbsp;&nbsp;
                            </button>
                            <a class="btn btn-danger btn-sm salvando" id="btnCancelar"
                               href="@Url.Action("Grid", "HorarioMovel")">
                                <span class="glyphicon glyphicon-remove salvando"></span> Cancelar
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<script>

    function removeNestedForm(element, container, deleteElement) {
        $container = $(element).parents(container);
        $container.find(deleteElement).val('True');
        $container.hide();
    }

    function addNestedForm(container, counter, ticks, content, optionalIndex) {
        var nextIndex = $(counter).length;
        var pattern = new RegExp(ticks, "gi");
        content = content.replace(pattern, nextIndex);
        $(container).append(content);
        corrigeDatePicker();
        $(container).find('input:visible:last').focus();
    }
    //var errorArray = new Array();
    $(document).ready(function () {
        validackbMarcaPercentualExtra();
        loadConvertDadosDSR();
        validaDSR();
        checkConversaoHoraNoturna();
        validaIntervaloAutomatico();
        MostrarSeparacaoPercentualHoraExtraNoturna($('#SeparaExtraNoturnaPercentual').is(':checked'));
        setaDatePiker('#DataInicial');
        setaDatePiker('#DataFinal');
        setaDatePiker('#DataManut');
        cwk_DataCalendario('#btnDataInicial', '#DataInicial');
        cwk_DataCalendario('#btnDataFinal', '#DataFinal');
        cwk_DataCalendario('#btnDataManut', '#DataManut');
        $('.timeJornada').attr('readonly', 'readonly');
        $('.timeTotalizador').attr('readonly', 'readonly');
        $('.ManutTimeJornada').attr('readonly', 'readonly');
        $('.ManutTimeTotalizador').attr('readonly', 'readonly');
        regraHoras();
        regraHorasManut();
        GetHorarioDinamico();

        @*Validações referente as horas In Itinere*@
        ValidaHabilitaInItinere('@Model.HabilitaInItinere');
        $('#pnlInItinerePercentuais').find('input:checkbox').each(function () {
            ValidaPercentualDiaInItinere(this);
        });

        $(":input[type='text']:enabled:visible:first").focus();
    });



    $(".lkpCodigoDescricaoClassificacao").bind("keydown click", function (e) {
        cwk_EventoConsultaUnico(e, this, "", "Classificacao", "", "");
        limpaErro($('#lkpCodigoDescricaoClassificacao').attr('name'));
    });

    $(".lkpJornada, .lkpJornadaManut").bind("keydown click", function (e) {
        cwk_EventoConsultaUnico(e, this, "", "Jornada", "", "");
    });

    $(".lkpJornada").blur("keydown click", function (e) {
        preencheIntervalo("#lkpJornada");
        validaIntervaloAutomatico();
    });

    $(".lkpJornadaManut").blur("keydown click", function (e) {
        addErroInput("lkpJornadaManut", "");
        limpaErro("lkpJornadaManut");
        ValidaJornadaObrigatoria();
        preencheIntervaloManut("#lkpJornadaManut");
        validaIntervaloAutomaticoManut();
    });

    $('#ckbHorasNormaisBool').click(function () {
        if ($("#ckbHorasNormaisBool").is(':checked')) {
            $("#ckbHorasMistaBool").prop("checked", false);
        }
        else {
            $("#ckbHorasMistaBool").prop("checked", true);
        }
        calcHoras();
    });

    $('#ManutCkbHorasNormais').click(function () {
        if ($("#ManutCkbHorasNormais").is(':checked')) {
            $("#ManutCkbHorasMista").prop("checked", false);
        }
        else {
            $("#ManutCkbHorasMista").prop("checked", true);
        }
        calcHorasManut();
    });

    $('#ckbHorasMistaBool').click(function () {
        if ($("#ckbHorasMistaBool").is(':checked')) {
            $("#ckbHorasNormaisBool").prop("checked", false);
        }
        else {
            $("#ckbHorasNormaisBool").prop("checked", true);
        }
        calcHoras();
    });

    $('#ManutCkbHorasMista').click(function () {
        if ($("#ManutCkbHorasMista").is(':checked')) {
            $("#ManutCkbHorasNormais").prop("checked", false);
        }
        else {
            $("#ManutCkbHorasNormais").prop("checked", true);
        }
        calcHorasManut();
    });

    function regraHoras() {
        if ($("#ckbHorasNormaisBool").is(':checked')) {
            $("#ckbHorasMistaBool").prop("checked", false);
        }
        else {
            $("#ckbHorasNormaisBool").prop("checked", false);
        }
        calcHoras();
    }

    function regraHorasManut() {
        if ($("#ManutCkbHorasNormais").is(':checked')) {
            $("#ManutCkbHorasMista").prop("checked", false);
        }
        else {
            $("#ManutCkbHorasNormais").prop("checked", false);
        }
        calcHorasManut();
    }

    function calcHoras() {
        var entradas = new Array();
        var saidas = new Array();
        $('.timeJornadaE').toArray().forEach(function (item, index, array) {
            entradas.push(ConvertHoraMinuto(item.value));
        });
        $('.timeJornadaS').toArray().forEach(function (item, index, array) {
            saidas.push(ConvertHoraMinuto(item.value));
        });
        var tipoHorario = 0;
        if ($('#ckbHorasNormaisBool').is(':checked')) {
            tipoHorario = 1;
        }
        else {
            tipoHorario = 2;
        }
        var resultado = CalculaCargaHoraria(entradas, saidas, ConvertHoraMinuto('@ViewBag.InicioAdNoturno'), ConvertHoraMinuto('@ViewBag.FimAdNoturno'), tipoHorario, false, false, false);
        var valor = $.trim(ConvertMinutoHora(resultado.horasTrabalhadasDiurnas, 2));
        if (valor == "" || valor == null || valor == undefined) {
            valor = "--:--";
        }
        $('#CargaDiurna').val(valor);
        valor = $.trim(ConvertMinutoHora(resultado.horasTrabalhadasNoturnas, 2));
        if (valor == "" || valor == null || valor == undefined) {
            valor = "--:--";
        }
        $('#CargaNoturna').val(valor);
        valor = $.trim(ConvertMinutoHora(resultado.horasTrabalhadasMista, 2));
        if (valor == "" || valor == null || valor == undefined) {
            valor = "--:--";
        }
        $('#txtTotalMista').val(valor);
    };

    function calcHorasManut() {
        var entradas = new Array();
        var saidas = new Array();
        $('.ManutTimeJornadaE').toArray().forEach(function (item, index, array) {
            entradas.push(ConvertHoraMinuto(item.value));
        });
        $('.ManutTimeJornadaS').toArray().forEach(function (item, index, array) {
            saidas.push(ConvertHoraMinuto(item.value));
        });
        var tipoHorario = 0;
        if ($('#ManutCkbHorasNormais').is(':checked')) {
            tipoHorario = 1;
        }
        else {
            tipoHorario = 2;
        }
        var resultado = CalculaCargaHoraria(entradas, saidas, ConvertHoraMinuto('@ViewBag.InicioAdNoturno'), ConvertHoraMinuto('@ViewBag.FimAdNoturno'), tipoHorario, false, false, false);
        var valor = $.trim(ConvertMinutoHora(resultado.horasTrabalhadasDiurnas, 2));
        if (valor == "" || valor == null || valor == undefined) {
            valor = "--:--";
        }
        $('#ManutCargaDiurna').val(valor);
        valor = $.trim(ConvertMinutoHora(resultado.horasTrabalhadasNoturnas, 2));
        if (valor == "" || valor == null || valor == undefined) {
            valor = "--:--";
        }
        $('#ManutCargaNoturna').val(valor);
        valor = $.trim(ConvertMinutoHora(resultado.horasTrabalhadasMista, 2));
        if (valor == "" || valor == null || valor == undefined) {
            valor = "--:--";
        }
        $('#ManutTxtTotalMista').val(valor);
    };

    function preencheIntervalo(lkp) {
        var pos = $(lkp).val().indexOf("|");
        if (pos > 0) {
            var horario = $(lkp).val();
            horario = horario.substr(pos + 1, horario.length);
            var horas = horario.split('-');
            var valor = '--:--';
            if ($.trim(horas[0]) == "" || $.trim(horas[0]) == null || $.trim(horas[0]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[0]) }
            $("#txt_e1").val(valor);
            if ($.trim(horas[2]) == "" || $.trim(horas[2]) == null || $.trim(horas[2]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[2]) }
            $("#txt_e2").val(valor);
            if ($.trim(horas[4]) == "" || $.trim(horas[4]) == null || $.trim(horas[4]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[4]) }
            $("#txt_e3").val(valor);
            if ($.trim(horas[6]) == "" || $.trim(horas[6]) == null || $.trim(horas[6]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[6]) }
            $("#txt_e4").val(valor);
            if ($.trim(horas[1]) == "" || $.trim(horas[1]) == null || $.trim(horas[1]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[1]) }
            $("#txt_s1").val(valor);
            if ($.trim(horas[3]) == "" || $.trim(horas[3]) == null || $.trim(horas[3]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[3]) }
            $("#txt_s2").val(valor);
            if ($.trim(horas[5]) == "" || $.trim(horas[5]) == null || $.trim(horas[5]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[5]) }
            $("#txt_s3").val(valor);
            if ($.trim(horas[7]) == "" || $.trim(horas[7]) == null || $.trim(horas[7]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[7]) }
            $("#txt_s4").val(valor);
        }
        else {
            $("#ManutTxt_e1").val('--:--');
            $("#ManutTxt_e2").val('--:--');
            $("#ManutTxt_e3").val('--:--');
            $("#ManutTxt_e4").val('--:--');
            $("#ManutTxt_s1").val('--:--');
            $("#ManutTxt_s2").val('--:--');
            $("#ManutTxt_s3").val('--:--');
            $("#ManutTxt_s4").val('--:--');
        }
        calcHoras();
    }

    function preencheIntervaloManut(lkp) {
        var pos = $(lkp).val().indexOf("|");
        if (pos > 0) {
            var horario = $(lkp).val();
            horario = horario.substr(pos + 1, horario.length);
            var horas = horario.split('-');
            var valor = '--:--';
            if ($.trim(horas[0]) == "" || $.trim(horas[0]) == null || $.trim(horas[0]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[0]) }
            $("#ManutTxt_e1").val(valor);
            if ($.trim(horas[2]) == "" || $.trim(horas[2]) == null || $.trim(horas[2]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[2]) }
            $("#ManutTxt_e2").val(valor);
            if ($.trim(horas[4]) == "" || $.trim(horas[4]) == null || $.trim(horas[4]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[4]) }
            $("#ManutTxt_e3").val(valor);
            if ($.trim(horas[6]) == "" || $.trim(horas[6]) == null || $.trim(horas[6]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[6]) }
            $("#ManutTxt_e4").val(valor);
            if ($.trim(horas[1]) == "" || $.trim(horas[1]) == null || $.trim(horas[1]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[1]) }
            $("#ManutTxt_s1").val(valor);
            if ($.trim(horas[3]) == "" || $.trim(horas[3]) == null || $.trim(horas[3]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[3]) }
            $("#ManutTxt_s2").val(valor);
            if ($.trim(horas[5]) == "" || $.trim(horas[5]) == null || $.trim(horas[5]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[5]) }
            $("#ManutTxt_s3").val(valor);
            if ($.trim(horas[7]) == "" || $.trim(horas[7]) == null || $.trim(horas[7]) == undefined) {
                valor = "--:--";
            } else { valor = $.trim(horas[7]) }
            $("#ManutTxt_s4").val(valor);
        }
        else {
            $("#ManutTxt_e1").val('--:--');
            $("#ManutTxt_e2").val('--:--');
            $("#ManutTxt_e3").val('--:--');
            $("#ManutTxt_e4").val('--:--');
            $("#ManutTxt_s1").val('--:--');
            $("#ManutTxt_s2").val('--:--');
            $("#ManutTxt_s3").val('--:--');
            $("#ManutTxt_s4").val('--:--');
        }
        calcHorasManut();
    }

    function callBackParam() {
        $.ajax({
            url: '/Horario/DadosParametros',
            type: 'POST',
            data: { parametro: $('#lkpDescParametro').val() },
            success: function (result) {
                $("#InicioAdNoturno").val(result.inicioAdNoturno);
                $("#FimAdNoturno").val(result.fimAdNoturno);
            }
        });
    };

    $(".lkpParametro").bind("keydown click", function (e) {
        cwk_EventoConsultaUnico(e, this, "", "Parametro", "", callBackParam);
    });

    $("#IntervaloautomaticoBool").click(function (event) {
        validaIntervaloAutomatico();
    });

    $(".preassinalada").click(function (event) {
        ValidaPreassinalada();
    });

    $("#CkbIntervaloAutomaticoManut").click(function (event) {
        validaIntervaloAutomaticoManut();
    });

    function validaIntervaloAutomatico() {
        if ($("#IntervaloautomaticoBool").is(':checked')) {
            if (($('#txt_s1').val() != '' && $('#txt_s1').val() != '--:--') && ($('#txt_e2').val() != '' && $('#txt_e2').val() != '--:--')) {
                $("#chk_pa1").attr('disabled', false);
                $("#chk_pa1").removeAttr("readonly");
            }
            else {
                $("#chk_pa1").attr("disabled", true);
                $("#chk_pa1").prop("checked", false);
            }

            if (($('#txt_s2').val() != '' && $('#txt_s2').val() != '--:--') && ($('#txt_e3').val() != '' && $('#txt_e3').val() != '--:--')) {
                $("#chk_pa2").attr('disabled', false);
                $("#chk_pa2").removeAttr("readonly");
            }
            else {
                $("#chk_pa2").attr("disabled", true);
                $("#chk_pa2").prop("checked", false);
            }

            if (($('#txt_s3').val() != '' && $('#txt_s3').val() != '--:--') && ($('#txt_e4').val() != '' && $('#txt_e4').val() != '--:--')) {
                $("#chk_pa3").attr('disabled', false);
                $("#chk_pa3").removeAttr("readonly");
            }
            else {
                $("#chk_pa3").attr("disabled", true);
                $("#chk_pa3").prop("checked", false);
            }
        }
        else {
            $('.chk_pa').attr("disabled", true);
            $('.chk_pa').prop("checked", false);
        }
    }

    function validaIntervaloAutomaticoManut() {
        if ($("#CkbIntervaloAutomaticoManut").is(':checked')) {
            if (($('#ManutTxt_s1').val() != '' && $('#ManutTxt_s1').val() != '--:--') && ($('#ManutTxt_e2').val() != '' && $('#ManutTxt_e2').val() != '--:--')) {
                $("#ManutChk_pa1").attr('disabled', false);
                $("#ManutChk_pa1").removeAttr("readonly");
            }
            else {
                $("#ManutChk_pa1").attr("disabled", true);
                $("#ManutChk_pa1").prop("checked", false);
            }

            if (($('#ManutTxt_s2').val() != '' && $('#ManutTxt_s2').val() != '--:--') && ($('#ManutTxt_e3').val() != '' && $('#ManutTxt_e3').val() != '--:--')) {
                $("#ManutChk_pa2").attr('disabled', false);
                $("#ManutChk_pa2").removeAttr("readonly");
            }
            else {
                $("#ManutChk_pa2").attr("disabled", true);
                $("#ManutChk_pa2").prop("checked", false);
            }

            if (($('#ManutTxt_s3').val() != '' && $('#ManutTxt_s3').val() != '--:--') && ($('#ManutTxt_e4').val() != '' && $('#ManutTxt_e4').val() != '--:--')) {
                $("#ManutChk_pa3").attr('disabled', false);
                $("#ManutChk_pa3").removeAttr("readonly");
            }
            else {
                $("#ManutChk_pa3").attr("disabled", true);
                $("#ManutChk_pa3").prop("checked", false);
            }
        }
        else {
            $('.ManutChk_pa').attr("disabled", true);
            $('.ManutChk_pa').prop("checked", false);
        }
    }

    $("#ConversaohoranoturnaBool").click(function (e) {
        checkConversaoHoraNoturna();
    });

    function checkConversaoHoraNoturna() {
        if ($("#ConversaohoranoturnaBool").is(':checked')) {
            $("#ConsideraadhtrabalhadasBool").prop("disabled", false)
        }
        else {
            $("#ConsideraadhtrabalhadasBool").prop("disabled", true);
            $("#ConsideraadhtrabalhadasBool").prop("checked", false);
        }
    }

    $(".ckbMarcaPercentualExtra").click(function (event) {
        validackbMarcaPercentualExtra(event);
    });

    $("#ConsiderasabadosemanaBool").click(function (event) {
        validackbMarcaPercentualExtra();
    });

    $("#ConsideradomingosemanaBool").click(function (event) {
        validackbMarcaPercentualExtra();
    });

    function validackbMarcaPercentualExtra(event) {
        var selecao = "";
        if (event) {
            selecao = event.target.id;
        }

        if ($("#ConsiderasabadosemanaBool").is(':checked')) {
            $("#ckbMarcaPercentualExtra6").prop("checked", false);
            $("#ckbMarcaPercentualExtra6").prop('disabled', true);
        }
        else {
            $("#ckbMarcaPercentualExtra6").prop('disabled', false);
        }

        $(".ckbMarcaPercentualExtra").each(function () {
            var ckbDia = this.id;
            var vdia = ckbDia.replace("ckbMarcaPercentualExtra", "");
            if ($(this).is(':checked')) {
                habilitaHorasExtras(vdia);
            }
            else {
                desabilitaHorasExtras(vdia);
            }

            if ($("#ConsideradomingosemanaBool").is(':checked')) {
                $("#ConsiderasabadosemanaBool").prop("disabled", true);
                $("#ConsiderasabadosemanaBool").prop("checked", true);
                $("#ckbMarcaPercentualExtra6").prop("checked", false);
                $("#ckbMarcaPercentualExtra6").prop('disabled', true);
                $("#ckbMarcaPercentualExtra7").prop("checked", false);
                $("#ckbMarcaPercentualExtra7").prop('disabled', true);
            }
            else {
                $("#ConsiderasabadosemanaBool").prop("disabled", false);
                $("#ckbMarcaPercentualExtra7").prop('disabled', false);
            }

            if (!$("#txtPercentualextra" + vdia).attr("disabled") && $("#txtPercentualextra" + vdia).val() == 0) {
                if (vdia < 5) {
                    var perc = (50 + (parseInt(vdia) * 10));
                    $("#txtPercentualextra" + vdia).val(perc);
                }
                else {
                    $("#txtPercentualextra" + vdia).val(100);
                    $("#txtPercentualExtraSegundo" + vdia).val(100);
                    $("#txtTipoAcumulo" + vdia).val(1);
                }
            }
        });
    }

    function habilitaHorasExtras(vdia) {
        $("#txtPercentualextra" + vdia).prop('disabled', false);
        $("#txtQuantidadeextra" + vdia).prop('disabled', false);
        $("#txtTipoAcumulo" + vdia).prop('disabled', false);
        $("#txtPercentualExtraSegundo" + vdia).prop('disabled', false);
        $("#txtPercentualExtraNoturna" + vdia).prop('disabled', false);
        $("#txtQuantidadeExtraNoturna" + vdia).prop('disabled', false);
        $("#txtPercentualExtraSegundoNoturna" + vdia).prop('disabled', false);
    }
    function desabilitaHorasExtras(vdia) {
        $("#txtPercentualextra" + vdia).prop('disabled', true);
        $("#txtPercentualextra" + vdia).val("0");
        $("#txtPercentualExtraNoturna" + vdia).prop('disabled', true);
        $("#txtPercentualExtraNoturna" + vdia).val("0");

        $("#txtQuantidadeextra" + vdia).prop('disabled', true);
        $("#txtQuantidadeextra" + vdia).val("---:--");
        $("#txtQuantidadeExtraNoturna" + vdia).prop('disabled', true);
        $("#txtQuantidadeExtraNoturna" + vdia).val("---:--");
        $("#txtTipoAcumulo" + vdia).prop('disabled', true);
        $("#txtTipoAcumulo" + vdia).val("-1");
        $("#txtPercentualExtraSegundo" + vdia).prop('disabled', true);
        $("#txtPercentualExtraSegundo" + vdia).val("0");
        $("#txtPercentualExtraSegundoNoturna" + vdia).prop('disabled', true);
        $("#txtPercentualExtraSegundoNoturna" + vdia).val("0");
    }

    $("#Habilitaperiodo01Bool").click(function (event) {
        if ($(this).is(':checked')) {
            $("#DescontacafemanhaBool").prop("checked", false);
        }
    });

    $("#DescontacafemanhaBool").click(function (event) {
        if ($(this).is(':checked')) {
            $("#Habilitaperiodo01Bool").prop("checked", false);
        }
    });

    $("#Habilitaperiodo02Bool").click(function (event) {
        if ($(this).is(':checked')) {
            $("#DescontacafetardeBool").prop("checked", false);
        }
    });

    $("#DescontacafetardeBool").click(function (event) {
        if ($(this).is(':checked')) {
            $("#Habilitaperiodo02Bool").prop("checked", false);
        }
    });

    $("#DescontardsrBool").click(function (event) {
        if ($(this).is(':checked')) {
            var $radios = $('input:radio[name=rTipoDSR]');
            if ($radios.is(':checked') === false) {
                $radios.filter('[value=1]').prop('checked', true);
            }

        } else {
            $('input:radio[name=rTipoDSR]').prop('checked', false);
        }

        validaDSR();
    });

    $('input:radio[name=rTipoDSR]').change(function () {
        validaDSR();
    });

    $("#btnSalvarHorarioFlexivel").click(function () {
        $("#controleHorariosFlexiveis").val("");
    });

    $(".btnGeraHorarioFlexivel").click(function () {
        if (($('#tbHorariosFlexiveis tbody tr.selected').attr('dataHorario') == undefined || $('#tbHorariosFlexiveis tbody tr.selected').attr('dataHorario') == "") &&
            ($(this).attr("ID") == 'btnExcluirHorarios')) {
            cwkErroTit("Nenhum registro selecionado!", "Para excluir horários é necessário selecionar um registro tabela!")
        }
        else {
            if ($(this).attr("ID") == 'btnExcluirHorarios') {
                bootbox.dialog({
                    message: "Ao confirmar a ação será permanente!",
                    title: "Deseja realmente excluir?",
                    buttons: {
                        success: {
                            label: "Excluir!",
                            className: "btn-primary",
                            callback: function () {
                                $("#controleHorariosFlexiveis").val($('#tbHorariosFlexiveis tbody tr.selected').attr('dataHorario'));
                                adicionarHorariosFlexiveis();
                            }
                        },
                        danger: {
                            label: "Cancelar!",
                            className: "btn-default",
                            callback: function () {

                            }
                        }
                    }
                });
            }
            else {
                var acao = $(this).attr("ID").replace("btn", "").replace("P", "/");
                $("#controleHorariosFlexiveis").val(acao);
                adicionarHorariosFlexiveis();
            }
        }

    });

    function adicionarHorariosFlexiveis() {
        $("#GridHorariosFlexiveis").load('@Url.Action("AdicionarHorariosFlexiveis")', {
            horario: getModeloHorario(),
            __RequestVerificationToken: gettoken()
        });
    }

    function getModeloHorario() {
        var Items = new Object();
        Items.HorariosFlexiveis = new Array();
        Items.LHorariosPHExtra = new Array();
        Items.LimitesDDsrProporcionais = new Array();
        Items.LHorariosAItinere = new Array();
        Items.HorarioRestricao = new Array();
        //Gera o Json do Horário
        $(".horario").each(function () {
            element = $(this);
            name = element.attr("name");

            if ($(this).attr("type") == "checkbox") {
                value = element.is(':checked');
            }
            else if ($(this).attr("type") == "radio") {
                if (element.is(':checked')) {
                    value = element.val()
                }
            }
            else if ($(this).hasClass('currency') || $(this).hasClass('money') || $(this).hasClass('decimalPercent')) {
                value = element.val().replace(',', '.');
            }
            else {
                value = element.val();
            }
            Items[name] = value;
        });

        //Gera Objetos HorariosPHExtra
        $(".DivLHorarioPHExtra").each(function () {
            var div = this;
            var jLHorariosPHExtra = new Object();

            var propriedadesSalvar = [];
            $("input[name*='LHorariosPHExtra[']", this).each(function () {
                propriedadesSalvar.push($(this).attr("name"));
            });

            $("select[name*='LHorariosPHExtra[']", this).each(function () {
                propriedadesSalvar.push($(this).attr("name"));
            });

            $.each($.unique(propriedadesSalvar), function (i, val) {
                element = $("input[name='" + val + "']", div);
                name = element.attr("name");
                if (name === "undefined") {
                    element = $("select[name='" + val + "']", div);
                    name = element.attr("name");
                }
                name = name.substr(name.indexOf(".") + 1, name.length);
                if ($(element).attr("type") == "checkbox") {
                    value = element.is(':checked');
                }
                else if (element.hasClass('currency') || element.hasClass('money') || element.hasClass('decimalPercent')) {
                    var valorElemento = element.val();
                    if (isEmpty(valorElemento)) {
                        value = 0;
                    }
                    else {
                    value = valorElemento.replace(',', '.');
                    }
                }
                else {
                    value = element.val();
                }

                if (name.indexOf("TipoAcumulo") >= 0 && (value == null || value == "")) {
                    value = 0;
                }
                jLHorariosPHExtra[name] = value;
            });
            Items.LHorariosPHExtra.push(jLHorariosPHExtra);
        });
        //Gera Objetos Horarios Flexiveis
        $("input[name ='LHorariosFlexiveis']").each(function () {
            Items.HorariosFlexiveis.push(new Object({ Idhorario: $(this).attr('Idhorario'), Dia: $(this).attr('Dia'), DiaDesc: $(this).attr('DiaDesc'), Data: $(this).attr('Data'), Entrada_1: $(this).attr('Entrada-1'), Entrada_2: $(this).attr('Entrada-2'), Entrada_3: $(this).attr('Entrada-3'), Entrada_4: $(this).attr('Entrada-4'), Saida_1: $(this).attr('Saida-1'), Saida_2: $(this).attr('Saida-2'), Saida_3: $(this).attr('Saida-3'), Saida_4: $(this).attr('Saida-4'), EntradaMin_1: $(this).attr('EntradaMin-1'), EntradaMin_2: $(this).attr('EntradaMin-2'), EntradaMin_3: $(this).attr('EntradaMin-3'), EntradaMin_4: $(this).attr('EntradaMin-4'), SaidaMin_1: $(this).attr('SaidaMin-1'), SaidaMin_2: $(this).attr('SaidaMin-2'), SaidaMin_3: $(this).attr('SaidaMin-3'), SaidaMin_4: $(this).attr('SaidaMin-4'), Totaltrabalhadadiurna: $(this).attr('Totaltrabalhadadiurna'), Totaltrabalhadanoturna: $(this).attr('Totaltrabalhadanoturna'), Cargahorariamista: $(this).attr('Cargahorariamista'), TotaltrabalhadadiurnaMin: $(this).attr('TotaltrabalhadadiurnaMin'), TotaltrabalhadanoturnaMin: $(this).attr('TotaltrabalhadanoturnaMin'), CargahorariamistaMin: $(this).attr('CargahorariamistaMin'), Flagfolga: $(this).attr('Flagfolga'), Folga: $(this).attr('Folga'), Diadsr: $(this).attr('Diadsr'), DSR: $(this).attr('DSR'), Intervaloautomatico: $(this).attr('Intervaloautomatico'), Preassinaladas1: $(this).attr('Preassinaladas1'), Preassinaladas1Bool: $(this).attr('Preassinaladas1Bool'), Preassinaladas2: $(this).attr('Preassinaladas2'), Preassinaladas2Bool: $(this).attr('Preassinaladas2Bool'), Preassinaladas3: $(this).attr('Preassinaladas3'), Preassinaladas3Bool: $(this).attr('Preassinaladas3Bool'), bCarregar: $(this).attr('bCarregar'), bCarregarBool: $(this).attr('bCarregarBool'), bUtilizaDDSRProporcional: $(this).attr('bUtilizaDDSRProporcional'), Marcacargahorariamista: $(this).attr('Marcacargahorariamista'), InicioAdNoturno: $(this).attr('InicioAdNoturno'), FimAdNoturno: $(this).attr('FimAdNoturno'), Acao: $(this).attr('Acao'), DiaStr: $(this).attr('DiaStr'), Idjornada: $(this).attr('Idjornada'), DescJornada: $(this).attr('DescJornada'), Neutro: $(this).attr('Neutro'), Id: $(this).attr('Id'), Codigo: $(this).attr('Codigo'), Incdata: $(this).attr('Incdata'), Inchora: $(this).attr('Inchora'), Incusuario: $(this).attr('Incusuario'), Altdata: $(this).attr('Altdata'), Althora: $(this).attr('Althora'), Altusuario: $(this).attr('Altusuario') }));
        });
        //Gera Objetos HorariosAItinere
        $(".DivLHorarioAItinere").each(function () {
            var jLHorariosAItinere = new Object();
            $(".LHorariosAItinere", this).each(function () {
                element = $(this);
                name = element.attr("name");
                name = name.substr(name.indexOf(".") + 1, name.length);
                if ($(this).attr("type") == "checkbox") {
                    value = element.is(':checked');
                }
                else {
                    value = element.val();
                }
                jLHorariosAItinere[name] = value;
            });
            Items.LHorariosAItinere.push(jLHorariosAItinere);
        });



        //Gera Objetos HorarioRestricao
        $(".divRestricao").each(function () {
            var div = this;
            var jHorarioRestricao = new Object();

            var propriedadesSalvar = [];
            $("input[name*='HorarioRestricao[']", this).each(function () {
                propriedadesSalvar.push($(this).attr("name"));
            });

            $("select[name*='HorarioRestricao[']", this).each(function () {
                propriedadesSalvar.push($(this).attr("name"));
            });

            $.each($.unique(propriedadesSalvar), function (i, val) {
                element = $("input[name='" + val + "']", div);
                name = element.attr("name");
                if (name === "undefined") {
                    element = $("select[name='" + val + "']", div);
                    name = element.attr("name");
                }
                name = name.substr(name.indexOf(".") + 1, name.length);
                if ($(element).attr("type") == "checkbox") {
                    value = element.is(':checked');
                }
                else {
                    value = element.val();
                }

                jHorarioRestricao[name] = value;
            });
            Items.HorarioRestricao.push(jHorarioRestricao);
        });



        Items.LimitesDDsrProporcionais = ConstroiListaJsonDeListaInputsMvc('.linhaDDSR');
        return JSON.stringify(Items);
    }

    $("#btnDivManutHorarioCancelar").click(function () {
        $("#btnDivManutHorarioFechar").trigger("click");
    });

    $('#CkbFolgManut').click(function () {
        addErroInput("lkpJornadaManut", "");
        limpaErro("lkpJornadaManut");
        if ($("#CkbFolgManut").is(':checked')) {
            $("#lkpJornadaManut").prop("disabled", true);
            $("#btnlkpJornadaManut").prop("disabled", true);
            $("#lkpJornadaManut").val("");
            $("#ManutTxt_e1").val("--:--");
            $("#ManutTxt_e2").val("--:--");
            $("#ManutTxt_e3").val("--:--");
            $("#ManutTxt_e4").val("--:--");
            $("#ManutTxt_s1").val("--:--");
            $("#ManutTxt_s2").val("--:--");
            $("#ManutTxt_s3").val("--:--");
            $("#ManutTxt_s4").val("--:--");
        }
        else {
            $("#lkpJornadaManut").prop("disabled", false);
            $("#btnlkpJornadaManut").prop("disabled", false);
        }
        validaIntervaloAutomaticoManut();
        calcHorasManut();
    });

    $("#btnDivManutHorarioSalvar").click(function () {
        var valido = true;
        ValidaJornadaObrigatoria();
        var idJornada = 0;
        $("#divManutHorario").find('input:text, input:password, input:file, select, textarea')
                .each(function () {
                    if ($(this).hasClass("input-validation-error")) {
                        valido = false;
                    }
                });
        if (valido) {
            if ($("#CkbFolgManut").is(':unchecked')) {
                $.ajax({
                    url: '/Horario/ValidaJornada',
                    type: 'POST',
                    data: { jornada: $('#lkpJornadaManut').val() },
                    success: function (result) {
                        if (result.erro) {
                            addErroInput("lkpJornadaManut", result.msgErro + "  ");
                            valido = false;
                        }
                        else {
                            if ($('#lkpJornadaManut').val() != result.descJornada) {
                                $('#lkpJornadaManut').val(result.descJornada);
                                preencheIntervaloManut("#lkpJornadaManut");
                                validaIntervaloAutomaticoManut();
                            }
                            valido = true;
                            idJornada = result.idJornada;
                        }
                    }
                });
            }

            if (valido) {
                //Seta valores no objeto horario movel
                var elHorarioFlexivel = $("input[name ='LHorariosFlexiveis'][ Data*='" + $("#DataManut").val() + "']");
                if ($(elHorarioFlexivel).attr("Acao") != '@Modelo.Acao.Incluir') {
                    $(elHorarioFlexivel).attr("Acao", '@Modelo.Acao.Alterar');
                }
                $(elHorarioFlexivel).attr("Idjornada", idJornada);
                $(elHorarioFlexivel).attr("DescJornada", $('#lkpJornadaManut').val());
                $(elHorarioFlexivel).attr("Entrada-1", $("#ManutTxt_e1").val());
                $(elHorarioFlexivel).attr("Entrada-2", $("#ManutTxt_e2").val());
                $(elHorarioFlexivel).attr("Entrada-3", $("#ManutTxt_e3").val());
                $(elHorarioFlexivel).attr("Entrada-4", $("#ManutTxt_e4").val());
                $(elHorarioFlexivel).attr("Saida-1", $("#ManutTxt_s1").val());
                $(elHorarioFlexivel).attr("Saida-2", $("#ManutTxt_s2").val());
                $(elHorarioFlexivel).attr("Saida-3", $("#ManutTxt_s3").val());
                $(elHorarioFlexivel).attr("Saida-4", $("#ManutTxt_s4").val());
                $(elHorarioFlexivel).attr("EntradaMin-1", ConvertHoraMinuto($("#ManutTxt_e1").val()));
                $(elHorarioFlexivel).attr("EntradaMin-2", ConvertHoraMinuto($("#ManutTxt_e2").val()));
                $(elHorarioFlexivel).attr("EntradaMin-3", ConvertHoraMinuto($("#ManutTxt_e3").val()));
                $(elHorarioFlexivel).attr("EntradaMin-4", ConvertHoraMinuto($("#ManutTxt_e4").val()));
                $(elHorarioFlexivel).attr("SaidaMin-1", ConvertHoraMinuto($("#ManutTxt_s1").val()));
                $(elHorarioFlexivel).attr("SaidaMin-2", ConvertHoraMinuto($("#ManutTxt_s2").val()));
                $(elHorarioFlexivel).attr("SaidaMin-3", ConvertHoraMinuto($("#ManutTxt_s3").val()));
                $(elHorarioFlexivel).attr("SaidaMin-4", ConvertHoraMinuto($("#ManutTxt_s4").val()));
                $(elHorarioFlexivel).attr("Totaltrabalhadadiurna", $("#ManutCargaDiurna").val());
                $(elHorarioFlexivel).attr("TotaltrabalhadadiurnaMin", ConvertHoraMinuto($("#ManutCargaDiurna").val()));
                $(elHorarioFlexivel).attr("Totaltrabalhadanoturna", $("#ManutCargaNoturna").val());
                $(elHorarioFlexivel).attr("TotaltrabalhadanoturnaMin", ConvertHoraMinuto($("#ManutCargaNoturna").val()));
                $(elHorarioFlexivel).attr("Cargahorariamista", $("#ManutTxtTotalMista").val());
                $(elHorarioFlexivel).attr("CargahorariamistaMin", ConvertHoraMinuto($("#ManutTxtTotalMista").val()));
                if ($("#CkbFolgManut").is(":checked")) {
                    $(elHorarioFlexivel).attr("Flagfolga", "1");
                }
                else { $(elHorarioFlexivel).attr("Flagfolga", "0"); }
                if ($("#CkbFolgManut").is(":checked")) {
                    $(elHorarioFlexivel).attr("Folga", "Sim");
                }
                else { $(elHorarioFlexivel).attr("Folga", "Não"); }

                if ($("#CkbDSRManut").is(":checked")) {
                    $(elHorarioFlexivel).attr("Diadsr", "1");
                }
                else { $(elHorarioFlexivel).attr("Diadsr", "0"); }
                if ($("#CkbDSRManut").is(":checked")) {
                    $(elHorarioFlexivel).attr("DSR", "Sim");
                }
                else { $(elHorarioFlexivel).attr("DSR", "Não"); }

                if ($("#CkbIntervaloAutomaticoManut").is(":checked")) {
                    $(elHorarioFlexivel).attr("Intervaloautomatico", "1");
                }
                else { $(elHorarioFlexivel).attr("Intervaloautomatico", "0"); }

                if ($("#ManutChk_pa1").is(":checked")) {
                    $(elHorarioFlexivel).attr("Preassinaladas1", "1");
                    $(elHorarioFlexivel).attr("preassinaladas1bool", "True");
                }
                else {
                    $(elHorarioFlexivel).attr("Preassinaladas1", "0");
                    $(elHorarioFlexivel).attr("preassinaladas1bool", "False");
                }

                if ($("#ManutChk_pa2").is(":checked")) {
                    $(elHorarioFlexivel).attr("Preassinaladas2", "1");
                    $(elHorarioFlexivel).attr("preassinaladas2bool", "True");
                }
                else {
                    $(elHorarioFlexivel).attr("Preassinaladas2", "0");
                    $(elHorarioFlexivel).attr("preassinaladas2bool", "False");
                }

                if ($("#ManutChk_pa3").is(":checked")) {
                    $(elHorarioFlexivel).attr("Preassinaladas3", "1");
                    $(elHorarioFlexivel).attr("preassinaladas3bool", "True");
                }
                else {
                    $(elHorarioFlexivel).attr("Preassinaladas3", "0");
                    $(elHorarioFlexivel).attr("preassinaladas3bool", "False");
                }

                if ($("#ManutCkbHorasMista").is(":checked")) {
                    $(elHorarioFlexivel).attr("Marcacargahorariamista", "1");
                }
                else {
                    $(elHorarioFlexivel).attr("Marcacargahorariamista", "0");
                }

                //Seta Valores na grid
                linha = $("#tbHorariosFlexiveis tbody tr.selected");
                linha.find('td[col=Entrada-1]').html($("#ManutTxt_e1").val());
                linha.find('td[col=Entrada-2]').html($("#ManutTxt_e2").val());
                linha.find('td[col=Entrada-3]').html($("#ManutTxt_e3").val());
                linha.find('td[col=Entrada-4]').html($("#ManutTxt_e4").val());
                linha.find('td[col=Saida-1]').html($("#ManutTxt_s1").val());
                linha.find('td[col=Saida-2]').html($("#ManutTxt_s2").val());
                linha.find('td[col=Saida-3]').html($("#ManutTxt_s3").val());
                linha.find('td[col=Saida-4]').html($("#ManutTxt_s4").val());
                linha.find('td[col=Totaltrabalhadadiurna]').html($("#ManutCargaDiurna").val());
                linha.find('td[col=Totaltrabalhadanoturna]').html($("#ManutCargaNoturna").val());
                linha.find('td[col=Cargahorariamista]').html($("#ManutTxtTotalMista").val());
                if ($("#CkbDSRManut").is(":checked")) {
                    linha.find('td[col=DSR]').html("Sim");
                }
                else { linha.find('td[col=DSR]').html("Não"); }
                if ($("#CkbFolgManut").is(":checked")) {
                    linha.find('td[col=Folga]').html("Sim");
                }
                else { linha.find('td[col=Folga]').html("Não"); }

                $("#divManutHorario").modal("hide");
            }
        }
    });
    function ValidaJornadaObrigatoria() {
        if (!($("#lkpJornadaManut").val() != null && $("#lkpJornadaManut").val() != "" && $("#lkpJornadaManut").val() != undefined) && ($("#CkbFolgManut").is(':unchecked'))) {
            addErroInput("lkpJornadaManut", "Campo Jornada Obrigatório!!!");
        }
    }
    //Fim Javascript referente ao horário flexivel

    $('form').on('submit', function (event) {
        var form = $("form");
        form.validate();
        if (form.valid()) {
            var formDados = getModeloHorario();
            $.ajax({
                type: 'POST',
                url: "/HorarioMovel/Cadastrar",
                data: {
                    horario: formDados,
                    __RequestVerificationToken: gettoken()
                },
                dataType: 'json',
                beforeSend: function () {
                    $.blockUI({ message: '<h2>Salvando <img src="../../Content/img/circulosLoading.GIF"></h2>' });
                },
                success: function (result) {
                    if (result.redirectTo) {
                        // Se deu certo e voltou com página para redirecionar
                        window.location.href = result.redirectTo;
                    }
                    else {
                        $.each(result.Errors, function (key, value) {
                            if (value != null) {
                                var erro = '';
                                for (var i = 0; i < value.length; i = i + 1) {
                                    erro = erro + value[i].ErrorMessage + ', ';
                                }
                                addErroInput(key, erro);
                            }
                        });
                        cwkErroTit("A Página Contém Erros!", "Foram encontrados erros ao salvar a página, por favor verifique!");
                        $(".salvando").removeAttr("disabled");
                    }
                },
                complete: function () {
                    $.unblockUI();
                }
            });
        }
        else { cwkErroTit("A Página Contém Erros!", "Foram encontrados erros ao salvar a página, por favor verifique!"); }
        return false;
    });

    //Adiciona erro em um input
    //Passar a propriedade name do input e o erro que deseja add.
    function addErroInput(key, erro) {

        //remove os campos com erro
        //$('form').find(".field-validation-error").removeClass("field-validation-error").addClass("field-validation-valid");

        $val = $('form').find(".field-validation-valid, .field-validation-error")
              .filter("[data-valmsg-for='" + key + "']")
              .removeClass("field-validation-valid")
              .addClass("field-validation-error");

        $input = $('form').find("*[name='" + key + "']");

        if (!$input.is(":hidden") && !$val.length) {
            $input.parent().append("<span class='field-validation-error' data-valmsg-for='" + key + "' data-valmsg-replace='false'> " + erro.substr(0, erro.length - 2) + "</span>");
        }
        else {
            $val.text(erro.substr(0, erro.length - 2));
        }

        $input.addClass("input-validation-error");
    }


    /// Validações DSR
    function loadConvertDadosDSR() {
        var $radios = $('input:radio[name=rTipoDSR]');
        if ($("#DescontardsrBool").is(':checked')) {
            if ($("#bUtilizaDDSRProporcional").val().toLowerCase() === "true") {
                $radios.filter('[value=2]').prop('checked', true);
            } else if ($("#DSRPorPercentual").val().toLowerCase() === "true") {
                $radios.filter('[value=3]').prop('checked', true);
            }
            else {
                $radios.filter('[value=1]').prop('checked', true);
            }
        }
    }

    function validaDSR() {
        if ($("#DescontardsrBool").is(':unchecked')) {
            $("#DesconsiderarFeriadoDDSR").prop('disabled', true).prop('checked', false);
        }
        else {
            $("#DesconsiderarFeriadoDDSR").prop('disabled', false);
        }

        switch ($('input:radio[name=rTipoDSR]:checked').val()) {
            case "1":
                controlaCamposDSRPadraoCLT(true);
                controlaCamposDSRProporcional(false);
                controlaCamposDSRPercentual(false);
                break;
            case "2":
                controlaCamposDSRPadraoCLT(false);
                controlaCamposDSRProporcional(true);
                controlaCamposDSRPercentual(false);
                break;
            case "3":
                controlaCamposDSRPadraoCLT(false);
                controlaCamposDSRProporcional(false);
                controlaCamposDSRPercentual(true);
                break;
            default:
                controlaCamposDSRPadraoCLT(false);
                controlaCamposDSRProporcional(false);
                controlaCamposDSRPercentual(false);
                break;
        }
    }

    function controlaCamposDSRPadraoCLT(habilitado) {
        $('#divddsrfixo').toggle(habilitado);
    }

    function controlaCamposDSRProporcional(habilitado) {
        $('#divddsrprop').toggle(habilitado);
        $('#bUtilizaDDSRProporcional').val(habilitado);
    }

    function controlaCamposDSRPercentual(habilitado) {
        $('#divDescontohorasdsr').toggle(habilitado);
        $('#DSRPorPercentual').val(habilitado);
    }

    function ConstroiListaJsonDeListaInputsMvc(nomeClasseLinhas) {
        var lista = $('form').find(nomeClasseLinhas + ' input').toArray();
        var listaObjs = new Array();
        var obj = null;
        lista.forEach(function (item) {
            var lNomeVar = ($(item).attr('id').split('__'));
            if (lNomeVar[1] == 'Id' && obj != null) {
                listaObjs.push(obj);
                obj = new Object();
            }
            if (lNomeVar[1] == 'Id' && obj == null) {
                obj = new Object();
            }
            obj[lNomeVar[1]] = $(item).prop('value');
        });
        if (obj != null) {
            listaObjs.push(obj);
        }
        return listaObjs;
    }

    $('.HabilitaInItinere').click(function (e) {
        ValidaHabilitaInItinere($(this).val());
    });


    function ValidaHabilitaInItinere(ValorHabilita) {
        if (ValorHabilita == 0) {
            $('#pnlParametrosInItinere').prop("disabled", true);
            $('#pnlParametrosInItinere').find('input:checkbox').prop("disabled", true);
            $('#pnlParametrosInItinere').find('input:checkbox').prop("checked", false);

            $('#pnlInItinerePercentuais').prop("disabled", true);
            $('#pnlInItinerePercentuais').find('input:text').prop("disabled", true);
            $('#pnlInItinerePercentuais').find('input:checkbox').prop("disabled", true);
            $('#pnlInItinerePercentuais').find('input:checkbox').prop("checked", false);
            $('#pnlInItinerePercentuais').find('input:text').val(0);
        }
        else
        {
            $('#pnlParametrosInItinere').find('input:checkbox').prop("disabled", false);
            $('#pnlParametrosInItinere').prop("disabled", false);
            $('#pnlInItinerePercentuais').prop("disabled", false);
            $('#pnlInItinerePercentuais').find('input:checkbox').prop("disabled", false);
        }
    }

    $('.ckbInItinereMarcaDia').click(function (e) {
        ValidaPercentualDiaInItinere(this);
    });

    function ValidaPercentualDiaInItinere(objeto) {
        var nomeCheck = $(objeto).attr('id');
        var posicao = nomeCheck.replace("ckbInItinereMarcaDia", "");
        var dentroJornada = '#txtPercentualDentroJornada' + posicao;
        var foraJornada = '#txtPercentualDentroFora' + posicao;
        if ($(objeto).is(':checked')) {
            $(dentroJornada).prop("disabled", false);
            $(foraJornada).prop("disabled", false);


        }
        else {
            $(dentroJornada).prop("disabled", true);
            $(foraJornada).prop("disabled", true);
            $(dentroJornada).val(0);
            $(foraJornada).val(0);
        }
    }

    $('#SeparaExtraNoturnaPercentual').change(function () {
        MostrarSeparacaoPercentualHoraExtraNoturna(this.checked);
    });

    function MostrarSeparacaoPercentualHoraExtraNoturna(exibir) {
        if (exibir) {
            $(".separaPercentualNoturno").show();
        }
        else {
            $(".separaPercentualNoturno").hide();
        }
    }

    function ValidaPreassinalada() {
        $("input[name ='LHorariosFlexiveis']").each(function () {
            if ($("#IntervaloautomaticoBool").is(":checked")) {
                $(this).attr("Intervaloautomatico", "1");
            }
            else { $(this).attr("Intervaloautomatico", "0"); }

            if ($("#chk_pa1").is(":checked") && $(this).attr("entrada-2") != "--:--") {
                $(this).attr("Preassinaladas1", "1");
                $(this).attr("preassinaladas1bool", "True");
            }
            else {
                $(this).attr("Preassinaladas1", "0");
                $(this).attr("preassinaladas1bool", "False");
            }

            if ($("#chk_pa2").is(":checked") && $(this).attr("entrada-3") != "--:--") {
                $(this).attr("Preassinaladas2", "1");
                $(this).attr("preassinaladas2bool", "True");
            }
            else {
                $(this).attr("Preassinaladas2", "0");
                $(this).attr("preassinaladas2bool", "False");
            }

            if ($("#chk_pa3").is(":checked") && $(this).attr("entrada-4") != "--:--") {
                $(this).attr("Preassinaladas3", "1");
                $(this).attr("preassinaladas3bool", "True");
            }
            else {
                $(this).attr("Preassinaladas3", "0");
                $(this).attr("preassinaladas3bool", "False");
            }
        });
    }

    function GetHorarioDinamico() {
        if ('@Model.IdHorarioDinamico.GetValueOrDefault()' > 0) {
            var parametros = { horario: "", idHorarioDinamico: @Model.IdHorarioDinamico.GetValueOrDefault() };
            CarregaDadosAjax('Selecionar', 'HorarioDinamico', parametros, '#divHorarioDinamicoDetalhes', null, HorarioDinamicoSelecao);
        }
    }
    function HorarioDinamicoSelecao() {
        $('#divHorarioDinamicoDetalhes').find('input, textarea, button, select, radio').prop("disabled", true);
        if ('@Model.CicloSequenciaIndice'.length > 0) {
            $("input[name=CicloSequenciaIndice][value=" + @Model.CicloSequenciaIndice + "]").attr('checked', 'checked');
        }
    }


    $('#PontoPorExcecaoBool').click(function (e) {
        if ($("#PontoPorExcecaoBool").is(':checked')) {
            $("#IntervaloautomaticoBool").prop("checked", false);
        }
        validaIntervaloAutomatico();
    });

    $('#IntervaloautomaticoBool').click(function (e) {
        if ($("#IntervaloautomaticoBool").is(':checked')) {
            $("#PontoPorExcecaoBool").prop("checked", false);
        }
    });
</script>

@if (ViewBag.Consultar == 1 || Model.PossuiFechamento)
{
    <script>
        $(document).ready(function () {
            $('form').find('input, textarea, button, select').attr('disabled', 'disabled');
            $('#pnlRestricoes').find('input, textarea, button, select').removeAttr('disabled');
        })
    </script>
}

@if (ViewBag.Consultar != 1 || Model.PossuiFechamento)
{
    <script>
        $(document).ready(function () {
            $('#chkInativarHorario').removeAttr('disabled');
            $('#Descricao').removeAttr('disabled');
            $('#btnSalvarHorarioFlexivel').removeAttr('disabled');
        })
    </script>
}

@if (ViewBag.RetController != null && ViewBag.RetAcao != null)
{
    <script>
        $(document).ready(function () {
            $('#btnCancelar').prop('href', '#');
            $('#btnCancelarX').prop('href', '#');
        });
        $('#btnCancelar').click(function () {
            hideModal();
        });

        $('#btnCancelarX').click(function () {
            hideModal();
        });

        function hideModal() {
            $('#divLoadCadastroModal').modal('hide');
            $('form').find('input, textarea, button, select').removeAttr('disabled');
        }
    </script>
}
<script>
    $(document).ready(function () {
        $('[id="DesconsiderarFeriado"]').tooltip({
            placement: 'top'
        });
    });
</script>