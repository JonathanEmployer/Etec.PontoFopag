@model PontoWeb.Models.RecalculaMarcacaoViewModel

@{
    ViewBag.Title = "Recalcular";
}
@using (Html.BeginForm())
{
    @Html.HiddenFor(model => model.Identificacao);

    <div class="divCenterMedio">
        <div class="panel panel-default">
            <div class="panel-heading salvando">
                @Html.ActionLink("X", "Index", "Home", null, new { @class = "close" })
                <h3 class="panel-title titulo-pagina">@ViewBag.Title</h3>
            </div>
            <div class="panel-body panelConteudo" id="panelBodyMaximo">
                @Html.ValidationMessage("CustomError")
                <div>
                    <div class="col-md-12">
                        <div style="margin-right:5px;">
                            <div class="row" style="padding-bottom:4px;">
                                <div id="divPeriodo">
                                    <div class="panel panel-default" id="pnlData">
                                        <div class="panel-heading" style="padding-top:5px; padding-bottom:5px">
                                            <div class="row">
                                                <div>
                                                    <div class="col-md-1"><label class="control-label label-sm">Período</label></div>
                                                    <div class="col-md-6">
                                                        <div class="row">
                                                            <div class="col-md-5">
                                                                <div class="input-group input-group-sm">
                                                                    @Html.TextBoxFor(model => Model.DataInicial, new { @class = "form-control input-sm MascDate datepickerpt", id="Dt_inicial" })
                                                                    <span class="input-group-btn">
                                                                        <button class="btn btn-primary" id="btnDataInicial" type="button"><span class="glyphicon glyphicon-calendar"></span></button>
                                                                    </span>
                                                                </div>
                                                                @Html.ValidationMessageFor(model => Model.DataInicial)
                                                            </div>
                                                            <div class="col-md-1">
                                                                @Html.Label("a", new { @class = "label-sm" })
                                                            </div>
                                                            <div class="col-md-5">
                                                                <div class="input-group input-group-sm">
                                                                    @Html.TextBoxFor(model => Model.DataFinal, new { @class = "form-control input-sm MascDate datepickerpt", id="Dt_final" })
                                                                    <span class="input-group-btn">
                                                                        <button class="btn btn-primary" id="btnDataFinal" type="button"><span class="glyphicon glyphicon-calendar"></span></button>
                                                                    </span>
                                                                </div>
                                                                @Html.ValidationMessageFor(model => Model.DataFinal)
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                @* Div do radio Tipo  *@
                                <div class="panel panel-default">
                                    <div class="panel-heading" style="padding-top:1px; padding-bottom:0px">
                                        <div class="row">
                                            <div class="col-md-1">@Html.LabelFor(model => model.Tipo, new { @class = "control-label label-sm" })</div>
                                            <div class="col-md-11">
                                                <div class="form-group input-group-sm">
                                                    <div class="col-md-3">
                                                        <div class="radio-inline" data-toggle="radio">
                                                            @Html.RadioButtonFor(model => model.Tipo, 0, new { id = "idRadioEmpresa", name = "rdio" })
                                                            <label class="label-sm" for="idRadioEmpresa">Empresa</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="radio-inline" data-toggle="radio">
                                                            @Html.RadioButtonFor(model => model.Tipo, 1, new { id = "idRadioDepartamento", name = "rdio" })
                                                            <label class="label-sm" for="idRadioDepartamento">Departamento</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="radio-inline" data-toggle="radio">
                                                            @Html.RadioButtonFor(model => model.Tipo, 3, new { id = "idRadioFuncao", name = "rdio" })
                                                            <label class="label-sm" for="idRadioFuncao">Função</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="radio-inline" data-toggle="radio">
                                                            @Html.RadioButtonFor(model => model.Tipo, 2, new { id = "idRadioFuncionario", name = "rdio" })
                                                            <label class="label-sm" for="idRadioFuncionario">Funcionário</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-body">
                                        <div style="padding-top:5px">
                                            <div id="divEmpresa" class="row divsTipo">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <div class="input-group input-group-sm">
                                                            @Html.TextBoxFor(model => model.Empresa, new { @class = "form-control  input-sm", id = "lkpEmpresa" })
                                                            <span class="input-group-btn">
                                                                <button class="btn btn-primary desabilitar" id="btnEmpresa" type="button"><span class="glyphicon glyphicon-search"></span></button>
                                                            </span>
                                                        </div>
                                                        @Html.ValidationMessageFor(model => model.Empresa)
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="divDepartamento" class="row divsTipo">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <div class="input-group input-group-sm">
                                                            @Html.TextBoxFor(model => model.Departamento, new { @class = "form-control  input-sm", id = "lkpDepartamento" })
                                                            <span class="input-group-btn">
                                                                <button class="btn btn-primary desabilitar" id="btnDepartamento" type="button"><span class="glyphicon glyphicon-search"></span></button>
                                                            </span>
                                                        </div>
                                                        @Html.ValidationMessageFor(model => model.Departamento)
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="divFuncao" class="row divsTipo">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <div class="input-group input-group-sm">
                                                            @Html.TextBoxFor(model => model.Funcao, new { @class = "form-control  input-sm", id = "lkpFuncao" })
                                                            <span class="input-group-btn">
                                                                <button class="btn btn-primary desabilitar" id="btnFuncao" type="button"><span class="glyphicon glyphicon-search"></span></button>
                                                            </span>
                                                        </div>
                                                        @Html.ValidationMessageFor(model => model.Funcao)
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="divFuncionario" class="row divsTipo">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <div class="input-group input-group-sm">
                                                            @Html.TextBoxFor(model => model.Funcionario, new { @class = "form-control  input-sm", id = "lkpFuncionario" })
                                                            <span class="input-group-btn">
                                                                <button class="btn btn-primary desabilitar" id="btnFuncionario" type="button"><span class="glyphicon glyphicon-search"></span></button>
                                                            </span>
                                                        </div>
                                                        @Html.ValidationMessageFor(model => model.Funcionario)
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                @Html.Partial("../JobManager/JobView")
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-xs-12 center-block">
                        <div style="text-align: right">
                            <button type="submit" class="btn btn-success" id="btnRecalcular">
                                <span class="glyphicon glyphicon-ok-circle"></span> &nbsp;Recalcular&nbsp;&nbsp;
                            </button>
                            <a class="btn btn-danger"
                               href="@Url.Action("Index", "Home")">
                                <span class="glyphicon glyphicon-remove salvando"></span> Cancelar
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<script>

    $(document).ready(function () {
        $("#lkpEmpresa").focus();
        cwk_DataCalendario('#btnDataInicial', '#DataInicial');
        cwk_DataCalendario('#btnDataFinal', '#DataFinal');
        cwk_EventoConsulta("#btnEmpresa", "#lkpEmpresa", "EventoConsulta", "Empresa", "");
        cwk_EventoConsulta("#btnDepartamento", "#lkpDepartamento", "EventoConsulta", "Departamento", "");
        cwk_EventoConsulta("#btnFuncao", "#lkpFuncao", "EventoConsulta", "Funcao", "");
        cwk_EventoConsulta("#btnFuncionario", "#lkpFuncionario", "EventoConsulta", "Funcionario", "");

        if ($('#idRadioEmpresa').is(':checked')) {
            divVisivel("#divEmpresa");
        }
        if ($('#idRadioDepartamento').is(':checked')) {
            divVisivel("#divDepartamento");
        };
        if ($('#idRadioFuncao').is(':checked')) {
            divVisivel("#divFuncao");
        };
        if ($('#idRadioFuncionario').is(':checked')) {
            divVisivel("#divFuncionario");
        };
        $("#idRadioEmpresa").change(function () {
            divVisivel("#divEmpresa");
        });
        $("#idRadioDepartamento").change(function () {
            divVisivel("#divDepartamento");
        });
        $("#idRadioFuncao").change(function () {
            divVisivel("#divFuncao");
        });
        $("#idRadioFuncionario").change(function () {
            divVisivel("#divFuncionario");
        });
        function divVisivel(idDiv) {
            $(".divsTipo").hide();
            $(idDiv).show();
        };
    });

    $('form').submit(function (e) {
        e.preventDefault();
        if ($(this).valid()) {
            PostFormJob(this);
        }
        return false;
    });
    
</script>



