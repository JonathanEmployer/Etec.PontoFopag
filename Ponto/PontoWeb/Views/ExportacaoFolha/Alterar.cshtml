@model Modelo.Proxy.pxyExportacaoFolha
@{
    ViewBag.Title = "Exportação Webfopag";
}
@using (Html.BeginForm())
{
    <div class="divCenterPequeno">
        <div class="panel panel-default" style="padding:0">
            <div class="panel-heading salvando">
                @Html.ActionLink("X", "Grid", "LayoutExportacao", null, new { @class = "close" })
                <h3 class="panel-title titulo-pagina">@ViewBag.Title</h3>
            </div>
            <div class="panel-body panelConteudo" id="panelBodyPequeno">
                @Html.ValidationMessage("CustomError")
                @Html.HiddenFor(model => model.IdLayout)
                @Html.HiddenFor(model => model.Identificacao)
                <div class="row">
                    <div class="col-md-12">
                        @* Div do radio Tipo Afastamento*@
                        <div class="panel panel-default">
                            <div class="panel-heading" style="padding-top:1px; padding-bottom:0px">
                                <div class="row">
                                    <div class="col-md-2">
                                        @Html.LabelFor(model => model.TipoSelecao, new { @class = "control-label label-sm" })
                                    </div>
                                    <div class="col-md-10" style="padding-right:0; padding-left:0">
                                        <div class="form-group input-group-sm">
                                            <div class="col-md-3">
                                                <div class="radio-inline" data-toggle="radio">
                                                    @Html.RadioButtonFor(model => model.TipoSelecao, 0, new { id = "idRadioEmpresa", name = "rdio" })
                                                    @Html.Label("lbEmpresa", "Empresa", new { @class = "control-label label-sm", @for = "idRadioEmpresa" })
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="radio-inline" data-toggle="radio">
                                                    @Html.RadioButtonFor(model => model.TipoSelecao, 1, new { id = "idRadioDepartamento", name = "rdio" })
                                                    @Html.Label("lbDepartamento", "Departamento", new { @class = "control-label label-sm", @for = "idRadioDepartamento" })
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="radio-inline" data-toggle="radio">
                                                    @Html.RadioButtonFor(model => model.TipoSelecao, 2, new { id = "idRadioFuncionario", name = "rdio" })
                                                    @Html.Label("lbFuncionario", "Funcionário", new { @class = "control-label label-sm", @for = "idRadioFuncionario" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-body" style="padding-top:0">
                                <div id="divEmpresa" class="row divsTipo">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.Empresa, new { @class = "control-label label-sm" })
                                            <div class="input-group input-group-sm">
                                                @Html.TextBoxFor(model => model.Empresa, new { @class = "form-control  input-sm", id = "lkpEmpresa" })
                                                <span class="input-group-btn">
                                                    <button class="btn btn-primary desabilitar" id="btnEmpresa" type="button"><span class="glyphicon glyphicon-search"></span></button>
                                                </span>
                                            </div>
                                            @Html.ValidationMessageFor(model => model.Empresa)
                                        </div>
                                    </div>
                                </div>
                                <div id="divDepartamento" class="row divsTipo">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.Departamento, new { @class = "control-label label-sm" })
                                            <div class="input-group input-group-sm">
                                                @Html.TextBoxFor(model => model.Departamento, new { @class = "form-control  input-sm", id = "lkpDepartamento" })
                                                <span class="input-group-btn">
                                                    <button class="btn btn-primary desabilitar" id="btnDepartamento" type="button"><span class="glyphicon glyphicon-search"></span></button>
                                                </span>
                                            </div>
                                            @Html.ValidationMessageFor(model => model.Departamento)
                                        </div>
                                    </div>
                                </div>
                                <div id="divFuncionario" class="row divsTipo">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.Funcionario, new { @class = "control-label label-sm" })
                                            <div class="input-group input-group-sm">
                                                @Html.TextBoxFor(model => model.Funcionario, new { @class = "form-control  input-sm", id = "lkpFuncionario" })
                                                <span class="input-group-btn">
                                                    <button class="btn btn-primary desabilitar" id="btnFuncionario" type="button"><span class="glyphicon glyphicon-search"></span></button>
                                                </span>
                                            </div>
                                            @Html.ValidationMessageFor(model => model.Funcionario)
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group input-group-sm">
                                            @Html.LabelFor(model => model.DataI, new { @class = "control-label label-sm" })
                                            <div class="input-group input-group-sm" onkeypress="dataKeypress('#DataI')">
                                                @Html.TextBoxFor(model => model.DataI, new { @class = "form-control input-sm MascDate datepickerpt", id = "DataI" })
                                                <span class="input-group-btn">
                                                    <button class="btn btn-primary desabilitar" id="btnDataInicial" type="button"><span class="glyphicon glyphicon-calendar"></span></button>
                                                </span>
                                            </div>
                                            @Html.ValidationMessageFor(model => model.DataI)
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group input-group-sm">
                                            @Html.LabelFor(model => model.DataF, new { @class = "control-label label-sm" })
                                            <div class="input-group input-group-sm" onkeypress="dataKeypress('#DataF')">
                                                @Html.TextBoxFor(model => model.DataF, new { @class = "form-control input-sm MascDate datepickerpt", id = "DataF" })
                                                <span class="input-group-btn">
                                                    <button class="btn btn-primary desabilitar" id="btnDataFinal" type="button"><span class="glyphicon glyphicon-calendar"></span></button>
                                                </span>
                                            </div>
                                            @Html.ValidationMessageFor(model => model.DataF)
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-xs-12 center-block">
                        <div style="text-align: right">
                            <button type="submit" class="btn btn-success salvando desabilitar">
                                <span class="glyphicon glyphicon-ok-circle"></span> &nbsp;Exportar&nbsp;&nbsp;
                            </button>
                            <a class="btn btn-danger salvando"
                               href="@Url.Action("Grid", "LayoutExportacao")">
                                <span class="glyphicon glyphicon-remove salvando"></span> Cancelar
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<script>
    $(document).ready(function () {
        $(":input[type='text']:enabled:visible:first").focus();
        validaTipo(0);
        cwk_DataCalendario('#btnDataInicial', '#DataI');
        cwk_DataCalendario('#btnDataFinal', '#DataF');
        cwk_EventoConsulta("#btnEmpresa", "#lkpEmpresa", "EventoConsulta", "Empresa", "");
        cwk_EventoConsulta("#btnDepartamento", "#lkpDepartamento", "EventoConsulta", "Departamento", "#lkpEmpresa");
        cwk_EventoConsulta("#btnFuncionario", "#lkpFuncionario", "EventoConsulta", "Funcionario", "");
        cwk_EventoConsulta("#btnOcorrencia", "#lkpOcorrencia", "EventoConsulta", "Ocorrencia", "");
    });

    $("#lkpEmpresa").change(function () {
        $('#lkpDepartamento').val('');
    });

    $('input:radio[name=TipoSelecao]').change(function () {
        validaTipo($(this).val());
    });
    
    function validaTipo(valor) {
        $("#lkpEmpresa").prop('disabled', false);
        $("#btnEmpresa").prop('disabled', false);
        $("#lkpDepartamento").prop('disabled', false);
        $("#btnDepartamento").prop('disabled', false);
        $("#lkpFuncionario").prop('disabled', false);
        $("#btnFuncionario").prop('disabled', false);
        switch (true) {
            
            case (valor == 0): // Empresa
                $("#btnFuncionario").prop('disabled', true);
                $("#lkpFuncionario").prop('disabled', true);
                $("#lkpFuncionario").val('');
                $("#btnDepartamento").prop('disabled', true);
                $("#lkpDepartamento").prop('disabled', true);
                $("#lkpDepartamento").val('');
                break;
            case (valor == 1): // Departamento
                $("#btnFuncionario").prop('disabled', true);
                $("#lkpFuncionario").prop('disabled', true);
                $("#lkpFuncionario").val('');
                break;
            case (valor == 2): // Funcionario
                $("#btnEmpresa").prop('disabled', true);
                $("#lkpEmpresa").prop('disabled', true);
                $("#lkpEmpresa").val('');
                $("#btnDepartamento").prop('disabled', true);
                $("#lkpDepartamento").prop('disabled', true);
                $("#lkpDepartamento").val('');
                break;
            default:
                break;
        }
    }
    
</script>